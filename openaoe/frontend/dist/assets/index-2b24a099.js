import{c as ae,p as ne,S as l,a as Ve,b as He,d as Fe,e as ue,f as ge,j as Qe,g as he,v as pe,h as fe,t as Ke,i as Ge,l as We,s as Ze,k as Xe,m as Je,r as Ye,o as _e,n as $e,q as et,u as tt,w as st,x as ot,y as at,z as nt,A as rt,B as xe,C as it,D as ct,E as lt,F as Ae,G as dt,H as n,I as mt,J as ut,K as gt,L as te,M as R,N as ht,O as pt,P as ft,T as W,Q as se,R as _t,U as xt,V as At,W as vt,X as bt,Y as yt,Z as wt,_ as kt,$ as Lt,a0 as Ct,a1 as St}from"./vendor-0b33134f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();const Z="clear_context",jt=["user","admin",Z],z="serial",X="parallel",q="serial_session",Rt=3,y="gpt-3.5-turbo",Bt="https://oss.openmmlab.com/alles-bot/",Et=["openai","minimax","claude","gpt-4","internlm"],B=ae()(ne((e,t)=>({token:"",theme:"light",username:"user",mode:z,updateTheme:s=>{e({theme:s})},updateMode:s=>{e({mode:s})}}),{name:"config",version:2,migrate(e,t){const o=JSON.parse(JSON.stringify(e));return t<2&&(o.token={}.VITE_ALLES_APIN_TOKEN,o.theme="light",o.username="user",o.mode=z),o}})),Mt=({children:e,inline:t,className:s,...o})=>{const a=/language-(\w+)/.exec(s||"")||[],r=B();return l.registerLanguage("assembly",Ve),l.registerLanguage("python",He),l.registerLanguage("c",Fe),l.registerLanguage("c/c++",ue),l.registerLanguage("clike",ue),l.registerLanguage("c++",ge),l.registerLanguage("cpp",ge),l.registerLanguage("java",Qe),l.registerLanguage("csharp",he),l.registerLanguage("c#",he),l.registerLanguage("vb",pe),l.registerLanguage("visual basic",pe),l.registerLanguage("javascript",fe),l.registerLanguage("typescript",Ke),l.registerLanguage("css",Ge),l.registerLanguage("less",We),l.registerLanguage("js",fe),l.registerLanguage("sql",Ze),l.registerLanguage("php",Xe),l.registerLanguage("go",Je),l.registerLanguage("r",Ye),l.registerLanguage("objective-c",_e),l.registerLanguage("objc",_e),l.registerLanguage("matlab",$e),l.registerLanguage("swift",et),l.registerLanguage("ruby",tt),l.registerLanguage("lua",st),l.registerLanguage("json",ot),l.registerLanguage("yaml",at),l.registerLanguage("xml",nt),l.registerLanguage("dDockerfile",rt),l.registerLanguage("markdown",xe),l.registerLanguage("md",xe),l.registerLanguage("makefile",it),l.registerLanguage("latex",ct),l.registerLanguage("llvm",lt),l.registerLanguage("shell",Ae),l.registerLanguage("sh",Ae),l.registerLanguage("bash",dt),!t&&a?n.jsx(l,{language:(a[1]||"Python").toLowerCase(),style:r.theme==="light"?mt:ut,customStyle:{borderRadius:"10px"},PreTag:"div",...o,children:e}):n.jsx("code",{className:s,...o,children:e})},Nt=React.memo(Mt),re=(...e)=>{const t=e.map(s=>typeof s=="function"?s:()=>s);return(...s)=>{let o=0,a;for(a=t.length===0?s:t[o++](...s);o<t.length;)a=t[o++](a);return a}},oe="locale",It=()=>{const e=window.localStorage.getItem(oe);return e?e==="en-US"?"en-US":"zh-CN":(localStorage.setItem(oe,"en-US"),"en-US")};let Ce=It();const Tt=e=>(window.localStorage.setItem(oe,e),e),Q=()=>Ce,Ot=e=>{Ce=Tt(e)},ve=e=>{const t=document.cookie.split(";");for(let s=0;s<t.length;s++)if(t[s].split("=")[0].trim()===e){const a=new Date;a.setTime(a.getTime()-60),document.cookie=`${t[s]};expires=${a.toUTCString()};path=/;domain=${{}.VITE_COOKIE_DOMAIN}`;break}},Se={tokenKey:"x_token",cookieTokenKey:"uaa-token",getFromCookie(){return gt.get(this.cookieTokenKey)},storage(e){return e==null?(localStorage.removeItem(this.tokenKey),!1):(localStorage.setItem(this.tokenKey,e),!0)},update(e){localStorage.getItem(this.tokenKey)!==e&&this.storage(e)},get(){const e=this.getFromCookie();return this.update(e),e||localStorage.getItem(this.tokenKey)},has(){return!!this.get()},removeAll(){ve(this.cookieTokenKey),ve("ssouid"),localStorage.removeItem(this.tokenKey)}},Pt=()=>"/login";function zt(e,t=50){let s=null;return(...o)=>{s?clearTimeout(s):e.apply(this,o),s=setTimeout(()=>{e.apply(this,o)},t)}}const je=e=>{const t=document.getElementById(e);t&&t.scrollTo({top:999999,behavior:"smooth"})},H=zt(e=>je(e),50),M=(e,t=null)=>te?{onTouchEnd:t||e}:{onClick:e||t},qt=e=>{if(e===null)return 0;const t=window.getSelection();if(t.rangeCount>0){const s=t.getRangeAt(0),o=s.cloneRange();return o.selectNodeContents(e),o.setEnd(s.startContainer,s.startOffset),o.toString().length}return 0};function Ut(e,t){let s=0;const o=document.createRange();o.setStart(e,0);function a(i){for(let c=0;c<i.childNodes.length;c++){const f=i.childNodes[c];if(f.nodeType===Node.TEXT_NODE){if(s+f.length>=t)return o.setStart(f,t-s),o.collapse(!0),!0;s+=f.length}else if(a(f))return!0}}a(e);const r=window.getSelection();r.removeAllRanges(),r.addRange(o)}const Dt=""+new URL("internlm-7cc58d2e.svg",import.meta.url).href,be=""+new URL("openai-6f4a287b.svg",import.meta.url).href,ye=""+new URL("claude-bd5f04f1.svg",import.meta.url).href,Vt="data:image/webp;base64,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",Ht=""+new URL("minimax-6a0e4e4d.png",import.meta.url).href,Ft=""+new URL("spark-7fb32fd7.svg",import.meta.url).href,Qt=""+new URL("A-017dd65e.svg",import.meta.url).href,K=[{provider:"internlm",model:"internlm-chat-7b",avatar:Dt,border:"rgba(1,52,220,0.85)",background:"linear-gradient(180deg, rgba(34,76,220,0.85) 0%, #0134DCD8 100%)"},{provider:"openai",model:"gpt-3.5-turbo",avatar:be,border:"#1a8d15",background:"linear-gradient(180deg, rgba(156, 206, 116, 0.15) 0%, #1a8d15 100%)"},{provider:"openai",model:"gpt-4",avatar:be,border:"#4dd547",background:"linear-gradient(180deg, rgba(156, 206, 116, 0.15) 0%, #08be00 100%)"},{provider:"claude",model:"claude-1",avatar:ye,border:"#8550ca",background:"linear-gradient(180deg, rgba(141, 90, 181, 0.15) 0%, rgba(106, 39, 123, 0.7) 53.12%, #663E9A 100%)"},{provider:"claude",model:"claude-1-100k",avatar:ye,border:"#8550ca",background:"linear-gradient(180deg, rgba(141, 90, 181, 0.15) 0%, rgba(106, 39, 123, 0.7) 53.12%, #663E9A 100%)"},{provider:"google",model:"chat-bison-001",avatar:Vt,border:"#ff85c7",background:"linear-gradient(180deg, rgba(181, 90, 90, 0.15) 0%, #fa5ab1 100%)"},{provider:"minimax",model:"abab5-chat",avatar:Ht,border:"#be1313",background:"linear-gradient(180deg, rgba(207, 72, 72, 0.15) 0%, rgba(151, 43, 43, 0.7) 53.12%, #742828 100%)"},{provider:"spark",model:"spark",avatar:Ft,border:"#6fa2db",background:"linear-gradient(180deg, rgba(72, 72, 207, 0.15) 0%, #7498be 100%)"},{provider:"admin",model:"admin",avatar:Qt,border:"#4e6ef2",background:"linear-gradient(rgb(255 255 255 / 80%) 0%, rgb(168 245 179) 100%)"},{provider:"user",model:"user",avatar:"user.png",border:"#71e875",background:"#71e875"}],Kt="_home-operation_16zek_1",Gt="_op-btn_16zek_14",Wt="_op-img_16zek_25",T={"home-operation":"_home-operation_16zek_1",homeOperation:Kt,"op-btn":"_op-btn_16zek_14",opBtn:Gt,"op-img":"_op-img_16zek_25",opImg:Wt},Zt={model:"abab5-chat",prompt:"",messages:[],role_meta:{user_name:"USER",bot_name:"BOT"},stream:!0,type:"json"},Xt={model:"gpt-3.5-turbo",prompt:"",messages:[],role_meta:{user_name:"user",bot_name:"assistant"},type:"json"},Jt={model:"chat-bison-001",prompt:{messages:[]},temperature:.1,candidate_count:1},Yt={prompt:"",model:"claude-1",max_tokens:5e3},$t={parameter:{chat:{temperature:.5,max_tokens:1024,chat_id:"user1"}},payload:{message:{text:[]}}},es={model:"internlm-chat-7b",prompt:"",messages:[],role_meta:{user_name:"user",bot_name:"assistant"},stream:!0},U="",k=new Map;k.set("minimax",{url:`${U}/v1/minimax/v1/text/chat-stream`,...Zt});k.set("openai",{url:`${U}/v1/openai/v1/text/chat-stream`,...Xt});k.set("google",{url:`${U}/v1/google/v1/palm/chat`,...Jt});k.set("claude",{url:`${U}/v1/claude/v1/text/chat-stream`,...Yt});k.set("spark",{url:`${U}/v1/xunfei/v1/spark/chat`,...$t});k.set("internlm",{url:`${U}/v1/internlm/v1/chat/completions`,...es});const Re=()=>({"Content-Type":"application/json"}),ts=e=>{var t;return((t=k.get(e))==null?void 0:t.url)||k.get(y).url},we=(e,t,s,o)=>{const a={...k.get(e)||k.get(y)};if(delete a.url,a.model=t,["openai","internlm","gpt-4"].includes(e)&&(a.prompt=s,a.messages=o),e==="minimax"&&(a.prompt=s,a.messages=o.map(r=>({text:r.text,sender_type:r.sender_type==="user"?"USER":"BOT"})),a.messages.push({text:s,sender_type:"USER"})),e==="google"){const r={content:"Hi! How can I help you today?",author:"1"},i=o.map(c=>({content:c.text,author:c.sender_type==="user"?"0":"1"}));i.push({content:s,author:"0"}),i.unshift(r),a.prompt.messages=i}if(e==="baidu"||e==="claude"){const r=o.map(i=>({role:i.sender_type,content:i.text}));r.push({role:"user",content:s}),a.messages=r}if(e==="spark"){const r=o.map(i=>({role:i.sender_type,content:i.text}));r.push({role:"user",content:s}),delete a.model,a.payload.message.text=r}return a},ss={development:"",staging:"",production:""},os={mock:"",development:"",staging:"",production:""},Be="production",as=ss[Be],ns=os[Be],rs=[],is=e=>{const t={};return rs.find(o=>e.url.endsWith(o))||Se.get(),{...e,headers:{lang:Q(),...e.headers,...t}}},cs=e=>({...e,headers:{...e.headers,"Client-Type":"app",type:0}}),ls=[is,cs],Ee=()=>{Se.removeAll()},ds=e=>{const t=e.data;return e.__meta.isAllResponseBody?t:t.data},ms=e=>{const t=e.data,o=!e.__meta.isIgnoreError;return t.success===!1&&o&&R.error(t.msg),e},us=e=>{const t=e.data;return t&&t.msgCode==="A0202"&&Ee(),e},gs=e=>{const t=e.data;return t&&t.msgCode==="C1600"&&(window.location.href=Pt()),e},Y=(e,t=!1)=>{t||R.error(e)},hs=e=>{if(e.response){const s=e.__meta.isIgnoreGatewayError,o=e.response.status;switch(console.log(e.code,"error....."),o){case 401:case 403:Ee();break;case 500:Y(Q()==="zh-CN"?"服务器没有响应，请稍后再试":"Sever error, please try again later.",s);break;default:e.code==="ERR_NETWORK"?Y(Q()==="zh-CN"?"网络出错了，请稍后再试":"Network error, please try again later.",s):Y(`${o}: ${e.message||"unknown error"}`,s)}}return Promise.reject(e)},Me=[us,gs,ms,ds],Ne=[hs],P=ht.create({method:"get",timeout:6e4,responseType:"json",paramsSerializer:e=>pt.stringify(e,{indices:!1})}),I=new Map,ps=e=>{let t={};return I.has(e.config.url)&&(t=I.get(e.config.url),I.delete(e.config.url)),{...e,__meta:t}},fs=e=>{let t={};return I.has(e.config.url)&&(t=I.get(e.config.url),I.delete(e.config.url)),{...e,__meta:t}};Me.unshift(ps);Ne.unshift(fs);const _s=re(...ls),xs=re(...Me),As=re(...Ne);P.interceptors.request.use(_s,e=>Promise.reject(e));P.interceptors.response.use(xs,As);const vs=(e,{method:t="GET",params:s={},data:o={},...a})=>{const r=`${as}${e}`;switch(t.toLowerCase()){case"get":return P.get(r,{params:s,...a});case"delete":return P.delete(r,{params:s,data:o,...a});case"post":return P.post(r,o,{params:s,...a});case"put":return P.put(r,o,{params:s,...a});default:return Promise.resolve({then:i=>i({msgCode:"300",msg:"Method Not Allowed",traceId:"-1",total:0,status:405,data:{}})})}},bs=(e,t={},s=ns)=>{const a=`${s}/${e}`.replace(/\/\//g,"/");return t.meta&&(I.set(a,t.meta),delete t.meta),vs(a,t)};async function ys(e,t,s){const o=Re();return bs(e,{method:"POST",headers:{...o},data:t,signal:s,meta:{isAllResponseBody:!0}})}function j(e){return{id:Date.now(),provider:"openai",date:new Date().toLocaleString(),sender_type:"user",text:"",...e}}function O(e){return{id:Date.now()+Math.random(),name:y,bot:"",messages:[],isShow:!0,clearContextIndex:0,...e}}const J=ae()(ne((e,t)=>({hasStreaming:!1,sessions:[O({name:q}),O({name:y})],currentSessionIndex:0,globalId:0,controller:{},newSession(s){const o=t().sessions,a=o.findIndex(i=>i.name===s);if(a>0){t().updateSession(a,{isShow:!0});return}const r=O({name:s,isShow:!0});e(()=>({globalId:t().globalId+1})),r.id=t().globalId,o.push(r),e(()=>({sessions:o}))},removeSession(s){const a=t().sessions.findIndex(r=>r.name===s);a&&t().updateSession(a,{isShow:!1})},getSession(s){const o=t().sessions,a=o.findIndex(r=>r.name===s);return a<0?O({name:s}):o[a]},onNewMessage(s,o=0){t().sessions[o].messages.push(s),console.log("[BOT] onNewMessage: ",s,o),e(()=>({sessions:t().sessions}))},deleteMessage(s,o){const a=t().sessions.find(r=>r.name===s);a&&(a.messages.splice(o,1),e(()=>({sessions:t().sessions})))},retry(s,o){const a=o||t().lastBotMessage(s).model||"",r=K.find(c=>c.model===a).provider,i=t().lastUserMessage(s).text;t().lastMessage(s).id===t().lastBotMessage(s).id&&t().getSession(s).clearContextIndex!==t().getSession(s).messages.length&&(t().deleteMessage(s,t().getSession(s).messages.length-1),t().deleteMessage(s,t().getSession(s).messages.length-1)),t().onUserInput(i,r,a,s)},async onUserInput(s,o,a,r){var D;const i=t().sessions.findIndex(d=>d.name===r),c=t().sessions[i];if(!c)return;const f=c.clearContextIndex||0,A=c.messages.slice(f).filter(d=>d.isError!==!0).map(d=>({text:d.text,sender_type:d.sender_type})),g=c.messages.length+1,p=j({text:s,provider:"user",sender_type:"user"}),m=j({provider:o,model:a,text:"...",sender_type:"bot",id:p.id+1,stream:!0});t().onNewMessage(p,i),t().onNewMessage(m,i),H(`chat-wrapper-${c.id}`);const v=new AbortController,L=t().controller;L[r]=v,e(()=>({controller:{...L}}));const N={method:"POST",headers:Re(),body:JSON.stringify({...we(o,a,s,A)})},w=ts(o);let G=!0;if(Et.includes(o))ft(w,{...N,signal:v.signal,async onopen(d){const u=d.headers.get("content-type");if(u!=null&&u.includes("text/event-stream")||(G=!1),!d.ok)throw new Error(d.status+d.statusText)},onmessage:d=>{if(G&&typeof d.data=="string"&&d.data.charAt(0)==="{"){const u=JSON.parse(d.data);if(u&&u.success==="true"){if(u.stop_reason==="max_token"){m.stream=!1,t().updateMessage(i,g,b=>{b.stream=!1,b.text=m.text.concat(`
 > ${u.stop_reason}`)});return}m.stream=!0,m.text=m.text.startsWith("...")?m.text.slice(3).concat(u.msg):m.text.concat(u.msg),H(`chat-wrapper-${c.id}`),t().updateMessage(i,g,b=>{b.text=m.text,b.stream=m.stream})}if(u&&u.success==="false")throw new Error(u.msg)}},onerror(d){console.log("[BOT] request error: ",d),m.stream=!1,t().updateMessage(i,g,b=>{b.stream=m.stream,b.text=d.message.includes("Please reduce the length of the messages.")?d.message:`${m.text}
 > Oops... Something went wrong (°⌓°)`,b.isError=!0});const u=t().controller;throw delete u[r],e(()=>({controller:{...u}})),d},onclose(){m.stream=!1,t().updateMessage(i,g,u=>{u.stream=m.stream});const d=t().controller;delete d[r],e(()=>({controller:{...d}})),console.log("[BOT] answering closed. ")}});else try{const d=await ys(w,we(o,a,s,A),v.signal);if(d.msgCode==="10000"&&d.data){if(o==="google"){if(!d.data.candidates&&d.data.filters){m.stream=!1,t().updateMessage(i,g,u=>{u.stream=m.stream,u.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,u.isError=!0});return}m.text=(D=d.data.candidates[0])==null?void 0:D.content}else o==="claude"?m.text=d.data.completion:m.text=d.data;m.stream=!1,t().updateMessage(i,g,u=>{u.text=m.text,u.stream=m.stream}),H(`chat-wrapper-${c.id}`)}else m.stream=!1,t().updateMessage(i,g,u=>{u.stream=m.stream,u.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,u.isError=!0})}catch{t().updateMessage(i,g,u=>{u.stream=!1,u.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,u.isError=!0})}finally{const d=t().controller;delete d[r],e(()=>({controller:{...d}}))}},updateMessage(s,o,a){const i=t().sessions[s].messages[o];i.date=new Date().toLocaleString(),a(i),e(()=>({sessions:t().sessions}))},lastMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return j({text:""});const a=o==null?void 0:o.messages;return Array.isArray(a)&&a.length>0?a.slice(-1)[0]:j({text:""})},lastUserMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return j({text:""});const a=[...o.messages];return Array.isArray(a)&&a.length>0?a.reverse().find(r=>r.sender_type==="user"):j({text:""})},lastBotMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return j({text:""});const a=[...o.messages];return Array.isArray(a)&&a.length>0?a.reverse().find(r=>r.sender_type==="bot"&&r.model!=="admin"):j({text:""})},updateSession(s,o){const a=t().sessions;let r=a[s];r={...r,...o},a[s]=r,e(()=>({sessions:a}))},closeController(s){const o=t().controller,a=o==null?void 0:o[s];if(a){a.abort&&a.abort(),delete o[s],e(()=>({controller:{...o}}));const r=t().sessions.findIndex(c=>c.name===s),i=t().sessions[r];t().updateMessage(r,i.messages.length-1,c=>{c.stream=!1,c.text=c.text.concat(`
 > Request canceled。`)}),H(`chat-wrapper-${i.id}`)}},clearAllData(){localStorage.removeItem("chat"),e(()=>({sessions:[O({name:y})]})),window.location.reload()}}),{name:"chat",version:2,migrate(e,t){const s=e,o=JSON.parse(JSON.stringify(s));if(t<2){o.globalId=0,o.sessions=[];const a=s.sessions;for(const r of a){const i=O({name:q});i.id=r.id,i.name=r.name,i.clearContextIndex=r.clearContextIndex,i.messages=[...r.messages],o.sessions.push(i)}}return o}})),ie=ae()(ne((e,t)=>({chosenBotNames:[y],currentBot:y,updateCurrentBot:s=>{e({currentBot:s})},addBot:s=>{const{chosenBotNames:o}=t();o.includes(s)||e({chosenBotNames:[...o,s]})},removeBot:s=>{const{chosenBotNames:o}=t();e({chosenBotNames:o.filter(a=>a!==s)})},getCurrentBot:()=>t().currentBot||y,clearBots:()=>{localStorage.removeItem("bot"),e({chosenBotNames:[y]})}}),{name:"bot",version:2,migrate(e,t){const o=JSON.parse(e);return t<2&&(o.chosenBotNames=[y],o.currentBot=y),o}})),ws=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsxs("g",{clipPath:"url(#clip0_50_304)",children:[n.jsx("mask",{id:"mask0_50_304",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20",children:n.jsx("path",{d:"M20 0H0V20H20V0Z",fill:"white"})}),n.jsxs("g",{mask:"url(#mask0_50_304)",children:[n.jsx("path",{d:"M18.659 10.0709L13.2991 2.95807L5.8894 8.54167L11.4582 15.4167L12.8564 14.4435L18.659 10.0709Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M11.4582 15.4167L9.85879 16.6978L5.45733 16.6975L4.37379 15.2596L1.69385 11.7032L6.0415 8.427",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M5.50244 16.6967H18.569",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round"})]})]}),n.jsx("defs",{children:n.jsx("clipPath",{id:"clip0_50_304",children:n.jsx("rect",{width:"20",height:"20",fill:"white"})})})]})},ks=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.33301 2.46417H11.6663V5.79752H17.9163V9.13086H2.08301V5.79752H8.33301V2.46417Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M3.33301 16.6667H16.6663V9.16669H3.33301V16.6667Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M6.66699 16.624V14.1309",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M10 16.624V14.124",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M13.333 16.624V14.1309",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M5 16.6667H15",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},Ls=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M15.3033 15.3033C13.9461 16.6605 12.0711 17.5 10 17.5C5.85787 17.5 2.5 14.1421 2.5 10C2.5 5.85787 5.85787 2.5 10 2.5C12.0711 2.5 13.9461 3.33947 15.3033 4.69671C15.9941 5.38754 17.5 7.08333 17.5 7.08333",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M17.5 3.33331V7.08331H13.75",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},Cs=e=>{var A;const{modelName:t}=e,s=J(),{sessions:o}=s,a=o.find(g=>g.name===t),r=ie(),i=()=>{const g=s.sessions.findIndex(m=>m.name===t),p=s.sessions[g];s.lastMessage(p.name).sender_type!==Z&&(p.clearContextIndex=p.messages.length||0,s.updateSession(g,p),s.onNewMessage(j({model:"admin",text:"",sender_type:Z,id:Date.now(),stream:!1,isError:!0}),g),H(`chat-wrapper-${p.id}`))},c=()=>{const g=o.findIndex(p=>p.name===t);s.updateSession(g,{messages:[],clearContextIndex:0})},f=()=>{s.closeController(t)};return React.useEffect(()=>()=>{f()},[]),n.jsxs("div",{className:T.homeOperation,children:[s.lastMessage(t).stream&&n.jsx(W,{title:"Stop generating",className:T.opBtn,children:n.jsx("div",{...M(f),children:n.jsx("img",{src:`${Bt}stop.png`,className:T.opImg,alt:"stop"},"stop_generate")})}),!!((A=a.messages)!=null&&A.length)&&!s.lastMessage(t).stream&&n.jsxs(n.Fragment,{children:[n.jsx(W,{title:"Clear context",className:T.opBtn,children:n.jsx("div",{...M(i),children:n.jsx(ws,{})})}),n.jsx(W,{title:"Clear message history",className:T.opBtn,children:n.jsx("div",{...M(c),children:n.jsx(ks,{})})}),n.jsx(W,{title:"Regenerate",className:T.opBtn,children:n.jsx("div",{...M(()=>s.retry(a.name,a.name===q&&r.currentBot)),children:n.jsx(Ls,{})})})]})]})},Ss="_hidden-scrollbar_61gam_1",js="_styled-scrollbar_61gam_11",Rs="_sessions_61gam_30",Bs="_preview-sessions_61gam_39",Es="_session-wrapper_61gam_51",Ms="_chat_61gam_56",Ns="_empty-chat_61gam_74",Is="_empty-chat-text_61gam_81",Ts="_message_61gam_96",Os="_message-wrapper_61gam_102",Ps="_chat-user-title_61gam_162",zs="_chat-bot-title_61gam_170",qs="_message-item_61gam_178",Us="_stream-wrapper_61gam_183",Ds="_glow_61gam_1",Vs="_chat-user_61gam_162",Hs="_chat-bot_61gam_170",Fs="_chat-operations_61gam_196",Qs="_chat-date_61gam_207",Ks="_chat-checkbox_61gam_214",Gs="_model-avatar_61gam_257",Ws="_model-avatar-img_61gam_270",Zs="_model-name_61gam_273",Xs="_copy-code-btn_61gam_279",Js="_clear-line_61gam_292",Ys="_markdown-block_61gam_314",$s="_mario_61gam_1",eo="_running-mario_61gam_1",x={"hidden-scrollbar":"_hidden-scrollbar_61gam_1",hiddenScrollbar:Ss,"styled-scrollbar":"_styled-scrollbar_61gam_11",styledScrollbar:js,sessions:Rs,"preview-sessions":"_preview-sessions_61gam_39",previewSessions:Bs,"session-wrapper":"_session-wrapper_61gam_51",sessionWrapper:Es,chat:Ms,"empty-chat":"_empty-chat_61gam_74",emptyChat:Ns,"empty-chat-text":"_empty-chat-text_61gam_81",emptyChatText:Is,message:Ts,"message-wrapper":"_message-wrapper_61gam_102",messageWrapper:Os,"chat-user-title":"_chat-user-title_61gam_162",chatUserTitle:Ps,"chat-bot-title":"_chat-bot-title_61gam_170",chatBotTitle:zs,"message-item":"_message-item_61gam_178",messageItem:qs,"stream-wrapper":"_stream-wrapper_61gam_183",streamWrapper:Us,glow:Ds,"chat-user":"_chat-user_61gam_162",chatUser:Vs,"chat-bot":"_chat-bot_61gam_170",chatBot:Hs,"chat-operations":"_chat-operations_61gam_196",chatOperations:Fs,"chat-date":"_chat-date_61gam_207",chatDate:Qs,"chat-checkbox":"_chat-checkbox_61gam_214",chatCheckbox:Ks,"model-avatar":"_model-avatar_61gam_257",modelAvatar:Gs,"model-avatar-img":"_model-avatar-img_61gam_270",modelAvatarImg:Ws,"model-name":"_model-name_61gam_273",modelName:Zs,"copy-code-btn":"_copy-code-btn_61gam_279",copyCodeBtn:Xs,"clear-line":"_clear-line_61gam_292",clearLine:Js,"markdown-block":"_markdown-block_61gam_314",markdownBlock:Ys,mario:$s,"running-mario":"_running-mario_61gam_1",runningMario:eo};async function to(e){try{await navigator.clipboard.writeText(e),R.success("copied!")}catch{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),R.success("copied!")}catch{R.error("copy failed")}document.body.removeChild(s)}}function so(e){const t=React.useRef(null),[s,o]=React.useState(!1),a=()=>{if(t.current){const r=t.current.innerText;to(r)}};return n.jsx("pre",{ref:t,children:n.jsxs("div",{onMouseOver:()=>o(!0),onFocus:()=>o(!0),onMouseLeave:()=>o(!1),children:[s&&n.jsx("span",{className:x.copyCodeBtn,...M(a)}),e.children]})})}const oo=()=>n.jsx("div",{id:x.mario});function ao(e){const[t,s]=React.useState(!1),{message:o}=e,a=o.sender_type==="user"||o.provider==="user",r=se(x.messageWrapper,a?x.chatUser:x.chatBot),i=B(),c=K.find(f=>f.model===(o.model||"user"));return c?n.jsx("div",{className:x.message,style:{justifyContent:a?"flex-end":"flex-start"},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:o.sender_type===Z?n.jsx("div",{className:x.clearLine,children:"Context cleared"}):n.jsxs(n.Fragment,{children:[!te&&!a&&n.jsx("div",{style:{background:c.background},className:x.modelAvatar,children:n.jsx("img",{src:c.avatar,className:x.modelAvatarImg,alt:c.model})}),n.jsxs("div",{title:o.model||i.username,className:r,style:{borderRadius:a?"10px 1px 10px 10px":"1px 10px 10px 10px"},children:[o.stream&&n.jsx(oo,{}),t&&n.jsx("div",{className:x.chatOperations,children:n.jsx("div",{children:`${c.provider} - ${c.model}`})}),n.jsx(_t,{className:x.markdownBlock,remarkPlugins:[xt,At,vt],rehypePlugins:[bt],components:{code:Nt,pre:so},children:o.text}),t&&n.jsx("div",{className:x.chatDate,style:{right:a?"0":"auto",left:a?"auto":"0"},children:o.date})]}),!te&&a&&n.jsx("div",{style:{color:c.background,marginRight:2},className:x.modelAvatar,children:"ME"})]})}):null}function no(e){const{session:t}=e;return React.useEffect(()=>{je(`chat-wrapper-${t.id}`)},[t.messages.length]),n.jsxs("div",{className:x.sessionWrapper,children:[n.jsxs("div",{className:x.chat,id:`chat-wrapper-${t.id}`,children:[Array.isArray(t.messages)&&t.messages.length===0&&n.jsx("div",{className:x.emptyChat,children:n.jsxs("div",{className:x.emptyChatText,children:[n.jsx("span",{children:"Shortcuts"}),n.jsx("br",{}),n.jsx("br",{}),n.jsx("code",{children:"#"})," - Change chat mode"]})}),Array.isArray(t.messages)&&t.messages.map((s,o)=>n.jsx("div",{className:x.messageItem,children:n.jsx(ao,{message:s,sessionInfo:{id:t.id,name:t.name,bot:t.bot}},s.id)},s.id))]}),n.jsx(Cs,{modelName:t.name})]})}const ro=()=>{const e=J(),t=B(),{sessions:s}=e;return n.jsx("div",{className:x.sessions,children:Array.isArray(s)&&s.map(o=>t.mode===z&&o.name!==q||t.mode===X&&o.name===q||!o.isShow?null:n.jsx(no,{session:o},o.id))})},io="_home-models_1vuuq_1",co="_model-avatar_1vuuq_10",lo="_model-avatar-img_1vuuq_24",mo="_model-chosen_1vuuq_29",uo="_model-name_1vuuq_35",go="_model-avatar-chosen_1vuuq_43",F={"home-models":"_home-models_1vuuq_1",homeModels:io,"model-avatar":"_model-avatar_1vuuq_10",modelAvatar:co,"model-avatar-img":"_model-avatar-img_1vuuq_24",modelAvatarImg:lo,"model-chosen":"_model-chosen_1vuuq_29",modelChosen:mo,"model-name":"_model-name_1vuuq_35",modelName:uo,"model-avatar-chosen":"_model-avatar-chosen_1vuuq_43",modelAvatarChosen:go},Ie=()=>{document.querySelectorAll(".scale-avatar").forEach(e=>{e.style.setProperty("--scale","1")})};function ho(e){const t=React.useRef(null),s=B(),o=J(),a=ie(),[r,i]=React.useState(!1),c=s.mode===X&&a.chosenBotNames.includes(e.model.model)||s.mode===z&&a.currentBot===e.model.model;function f(g){if(s.mode===X)if(a.chosenBotNames.includes(g)){if(a.chosenBotNames.length===1){R.warning("At least one model should be selected");return}a.removeBot(g),o.removeSession(g)}else a.chosenBotNames.length===Rt?R.warning("No more models can be selected"):(a.addBot(g),o.newSession(g));else a.updateCurrentBot(g)}const A=g=>{let p=g.target;g.target!==t.current&&(p=g.target.parentNode);const m=p.getBoundingClientRect(),v=Math.abs(g.clientX-m.left)/m.width,L=p.previousElementSibling||null,N=p.nextElementSibling||null,w=.4;Ie(),L&&L.style.setProperty("--scale",`${1+w*Math.abs(v-1)}`),p.style.setProperty("--scale",`${1+w}`),N&&N.style.setProperty("--scale",`${1+w*v}`),g.stopPropagation()};return n.jsxs("div",{ref:t,className:`${F.modelAvatar} ${c&&F.modelAvatarChosen} scale-avatar`,onMouseMove:A,onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1),...M(()=>f(e.model.model)),onFocus:()=>i(!0),children:[n.jsx("img",{src:e.model.avatar,className:F.modelAvatarImg,alt:e.model.provider}),(r||c)&&n.jsxs("div",{className:F.modelName,children:["@",e.model.model||e.model.provider]})]})}const po=()=>n.jsx("div",{className:F.homeModels,onMouseLeave:Ie,children:K.filter(e=>!jt.includes(e.provider)).map(e=>n.jsx(ho,{model:e},e.model))}),$=[{name:"Serial Mode",title:"Toggle between serial and parallel mode",description:"Serial mode will send your message to one bot each time."},{name:"Parallel Mode",title:"Toggle between serial and parallel mode",description:"Parallel mode will send your message to all bots at once."}],fo=""+new URL("send-5bb2204f.png",import.meta.url).href,_o="_home-prompt-wrapper_1o1fz_1",xo="_prompt_1o1fz_29",Ao="_prompt-trash_1o1fz_36",vo="_prompt-operation_1o1fz_40",bo="_chosen-prompt_1o1fz_45",yo="_model-item_1o1fz_49",wo="_model-avatar_1o1fz_54",ko="_home-input-wrapper_1o1fz_60",Lo="_prompt-editor_1o1fz_78",Co="_model-name-list_1o1fz_85",So="_model-name_1o1fz_85",jo="_empty-editor_1o1fz_97",Ro="_backup-textarea_1o1fz_144",Bo="_submit-btn_1o1fz_150",Eo="_prompt-clip_1o1fz_154",C={"home-prompt-wrapper":"_home-prompt-wrapper_1o1fz_1",homePromptWrapper:_o,prompt:xo,"prompt-trash":"_prompt-trash_1o1fz_36",promptTrash:Ao,"prompt-operation":"_prompt-operation_1o1fz_40",promptOperation:vo,"chosen-prompt":"_chosen-prompt_1o1fz_45",chosenPrompt:bo,"model-item":"_model-item_1o1fz_49",modelItem:yo,"model-avatar":"_model-avatar_1o1fz_54",modelAvatar:wo,"home-input-wrapper":"_home-input-wrapper_1o1fz_60",homeInputWrapper:ko,"prompt-editor":"_prompt-editor_1o1fz_78",promptEditor:Lo,"model-name-list":"_model-name-list_1o1fz_85",modelNameList:Co,"model-name":"_model-name_1o1fz_85",modelName:So,"empty-editor":"_empty-editor_1o1fz_97",emptyEditor:jo,"backup-textarea":"_backup-textarea_1o1fz_144",backupTextarea:Ro,"submit-btn":"_submit-btn_1o1fz_150",submitBtn:Bo,"prompt-clip":"_prompt-clip_1o1fz_154",promptClip:Eo},ee={default:"Press # to toggle chat mode, and ENTER to send",google:"Google does not support Chinese"},Mo=()=>{const e=J(),t=ie(),s=B(),o=React.useRef(null),a=React.useRef(null),[r,i]=React.useState($),[c,f]=React.useState(!1),[A,g]=React.useState(""),[p,m]=React.useState(null),[v,L]=React.useState(0),[N,w]=React.useState(""),[G,D]=React.useState(ee.default),[d,u]=React.useState(""),[b,Te]=React.useState(0),[Oe,ce]=React.useState(!1),[Pe,le]=React.useState(!0),ze=h=>(h=h.replace(/<span class="modelName">.*?<\/span>/g,""),a.current.innerHTML=h,a.current.innerText||""),V=(h,_=!0)=>{if(h===d)return;const E={allowedTags:["b","i","a","p","text","br","div","span","img"],allowedAttributes:{a:["href"],span:["class","id"],img:["src"],div:["class","id"]}};if(_){const De=qt(o.current);Te(De)}u(yt(h,E))},de=h=>{h.name==="Serial Mode"?(s.updateMode(z),R.success("Change to serial mode!"),V("")):h.name==="Parallel Mode"?(s.updateMode(X),R.success("Change to parallel mode!"),V("")):(m(h),V("")),g(""),f(!1),w("")},me=()=>{if(A.trim())if(g(""),V(""),s.mode===z){const h=K.find(_=>_.model===t.currentBot).provider;e.onUserInput(A,h,t.currentBot,q)}else t.chosenBotNames.forEach(h=>{const _=K.find(E=>E.model===h).provider;e.onUserInput(A,_,h,h)})},qe=h=>{const _=h.key;if(!Oe){if(_==="Enter"&&!h.shiftKey){if(h.preventDefault(),A.trim()){if(c){de(r[v]);return}me()}le(!0)}if(_==="#"&&!c&&f(!0),c){const E=r.length-1;_==="ArrowUp"?(L(v===0?E:v-1),h.preventDefault()):_==="ArrowDown"?(L(v===E?0:v+1),h.preventDefault()):_==="Backspace"&&A.slice(-1)==="#"&&(f(!1),w(""))}c&&_==="Escape"&&f(!1)}},Ue=h=>{le(!h.target.textContent.length);const _=h.target;g(ze(_.innerHTML));const E=_.innerHTML;V(E)};return React.useEffect(()=>{const h=$.filter(_=>_.name.toLowerCase().includes(N.toLowerCase()));L(0),h.length===0?(f(!1),i($)):i(h)},[N]),React.useEffect(()=>{c&&w(A.split("#").slice(-1)[0])},[A]),React.useEffect(()=>{D(p?p.description:ee[t.currentBot]||ee.default)},[p,t.currentBot]),React.useLayoutEffect(()=>{o.current&&Ut(o.current,b)},[d]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:C.homeInputWrapper,children:[c&&n.jsx("div",{className:C.homePromptWrapper,children:r.map((h,_)=>n.jsx("div",{className:se(C.prompt,{[C.chosenPrompt]:_===v}),...M(()=>de(h)),children:n.jsx("div",{className:C.modelItem,children:h.name})},h.name))}),p&&n.jsxs("div",{className:C.modelName,children:["#",p.name]}),n.jsx("div",{contentEditable:!0,spellCheck:!0,ref:o,id:"prompt-textarea",className:se(C.promptEditor,{[C.emptyEditor]:Pe}),"data-text":G,onKeyDown:qe,onCompositionStart:()=>ce(!0),onInput:Ue,onCompositionEnd:()=>ce(!1),dangerouslySetInnerHTML:{__html:d}}),n.jsx("img",{className:C.promptClip,src:fo,alt:"send-message",...M(me)})]}),n.jsx("div",{ref:a,style:{opacity:0,display:"hidden",position:"fixed",fontSize:0}})]})},No="_loading-icon_1yjma_1",Io="_aoe_1yjma_1",To="_home-loading_1yjma_6",ke={"loading-icon":"_loading-icon_1yjma_1",loadingIcon:No,aoe:Io,"home-loading":"_home-loading_1yjma_6",homeLoading:To},Oo=()=>n.jsx("div",{className:ke.homeLoading,children:n.jsx("div",{className:ke.loadingIcon})}),Po="_home_1tmut_1",zo="_home-chats_1tmut_5",qo="_homeModal_1tmut_10",Le={home:Po,"home-chats":"_home-chats_1tmut_5",homeChats:zo,homeModal:qo},Uo=()=>{const[e,t]=React.useState(!1);return React.useEffect(()=>{setTimeout(()=>{t(!0)},1500)},[]),e},Do=()=>Uo()?n.jsxs("div",{className:Le.home,children:[n.jsx("div",{className:Le.homeChats,children:n.jsx(ro,{})}),n.jsx(Mo,{}),n.jsx(po,{})]}):n.jsx(Oo,{}),Vo=()=>n.jsx(wt,{children:n.jsx(kt,{children:n.jsx(Lt,{path:"/",element:n.jsx(Do,{})})})}),Ho={welcome:"欢迎，感恩",hello:"嗨",hi:"你好",loading:"Loading"},Fo={...Ho},Qo={welcome:"Welcome, grateful",hello:"Hi",hi:"Hello",loading:"Loading"},Ko={...Qo},Go={"zh-CN":Fo,"en-US":Ko};function Wo(e){}const Zo={locale:Q(),setLocale:Wo},Xo=React.createContext(Zo),Jo=({children:e})=>{const[t,s]=React.useState(Q()),o=React.useCallback(r=>{s(r),Ot(r)},[]),a=React.useMemo(()=>({locale:t,setLocale:o}),[t,o]);return n.jsx(Ct,{locale:t,messages:Go[t],children:n.jsx(Xo.Provider,{value:a,children:e})})},Yo=""+new URL("AOE-b98456c3.svg",import.meta.url).href,$o="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEKSURBVHgBtVWLDYIwEH1RB2CEbuAKbqAbgBOoE+AGjIAboRPABrIBcnLE2vRqD9OXvJCUd196xxo6FCO3Ix9IhIEZjRUSww2QYWqDEfQd0weyPfBTBAmoBW0giA+Gbcg2DwkzS1hbZ1frnNjwe8OaSpOYYYMdpnY9Lccu6d2ZtTV0Vb8Nh0jmUML8yNxXSaYJUCuczyyhQLMgQCs5KzyiYSGB79uWJ59kCXYWsWx8jqQKbtDjrhHTldNeUwMlCkWAk+TE1yKDaQ66kZeRPWT0nAj9gCpE7qH5A1dOQHs2SFPiM721dR6c6AL/r+t9SJixQMqihTyxBtPSU+0kF/bERiH5JG+gwxHKCl5qY6X0Tnl2NgAAAABJRU5ErkJggg==",ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFkSURBVHgB7VTLcYNADNViF+CL+dxIB6QDXEHSQZxK7HSQDhJ34A4gHdAB3PgMBxfAJ08Tx7NZWDA4R7+ZndFqJT2BPkR3jECMGaRp6huG8dK2rY+rixNCfnUcJ6ErIAYCu0KID4j+xViIvWVZbzQBvQRFUXjIMsBZ3RKcsVQVnLkaHPIJ50Az0CFApn+Cn3WhbdsJzYAhX/I8f6afQqqkEc2EodyfNHYu/ROBp7HT6TvgGmoJ8O97A7Ge54GuAGZmpyUYAs+Emp0KvO+RzHaIING7Ew9eUJZlp05xHK+yLHvH+05tiKWSZahmoJJUVXVEsIgD8XyciX2ptfUETdMcYLylcXhyvSBfHhaLxVE27KwKZBeQtH8mIsFAPsiKTpF5U+IrTjQR7APfjarvEPAahvFmCgnbsk/fCu9tU9M0I9TjkYa76hch27JPL/mYN7dlXde8o+TC8leGGKrP9Xr9RXfcgm+bjqOGex62UQAAAABJRU5ErkJggg==",ta="_header_1iqh2_1",sa="_header-title_1iqh2_11",oa="_header-operation_1iqh2_22",aa="_light-theme_1iqh2_25",na="_dark-theme_1iqh2_36",ra="_animate-light_1iqh2_47",ia="_animate-dark_1iqh2_51",S={header:ta,"header-title":"_header-title_1iqh2_11",headerTitle:sa,"header-operation":"_header-operation_1iqh2_22",headerOperation:oa,"light-theme":"_light-theme_1iqh2_25",lightTheme:aa,"dark-theme":"_dark-theme_1iqh2_36",darkTheme:na,"animate-light":"_animate-light_1iqh2_47",animateLight:ra,"animate-dark":"_animate-dark_1iqh2_51",animateDark:ia},ca=()=>{const e=React.useRef(null),t=React.useRef(null),[s,o]=React.useState(!1),a=B(),r=()=>{window.location.href="/"},i=(c="")=>{setTimeout(()=>{a.updateTheme(c||a.theme==="light"?"dark":"light")},200)};return React.useEffect(()=>{},[a.theme]),React.useEffect(()=>{document.body.setAttribute("data-theme",a.theme),e.current&&t.current&&(a.theme==="light"?(e.current.classList.remove(S.animateLight),t.current.classList.remove(S.animateDark)):a.theme==="dark"&&(e.current.classList.add(S.animateLight),t.current.classList.add(S.animateDark)))},[a.theme,s]),n.jsxs("div",{className:S.header,children:[n.jsx("div",{className:S.headerTitle,onClick:r,children:n.jsx("img",{src:Yo,alt:"AOE_LOGO"})}),n.jsxs("div",{className:S.headerOperation,onClick:()=>i(),children:[n.jsx("span",{ref:e,className:S.lightTheme,children:n.jsx("img",{src:$o,alt:"sun",onLoad:()=>o(!s)})}),n.jsx("span",{ref:t,className:S.darkTheme,children:n.jsx("img",{src:ea,alt:"moon",onLoad:()=>o(!s)})})]})]})};const la=()=>n.jsxs(Jo,{children:[n.jsx(ca,{}),n.jsx(Vo,{})]});St.createRoot(document.getElementById("root")).render(n.jsx(la,{}));
