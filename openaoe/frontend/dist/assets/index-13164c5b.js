import{c as re,p as ie,S as l,a as Ve,b as Fe,d as Qe,e as he,f as pe,j as Ke,g as fe,v as _e,h as xe,t as Ge,i as We,l as Ze,s as Xe,k as Je,m as Ye,r as $e,o as Ae,n as et,q as tt,u as st,w as ot,x as at,y as nt,z as rt,A as it,B as ve,C as ct,D as lt,E as dt,F as be,G as mt,H as n,I as gt,J as ut,K as ht,L as oe,M,N as pt,O as ft,P as _t,T as W,Q as ae,R as xt,U as At,V as vt,W as bt,X as yt,Y as wt,Z as kt,_ as Lt,$ as Ct,a0 as St,a1 as jt}from"./vendor-0b33134f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(a){if(a.ep)return;a.ep=!0;const r=s(a);fetch(a.href,r)}})();const Z="clear_context",Rt=["user","admin",Z],q="serial",X="parallel",U="serial_session",Mt=3,y="gpt-3.5-turbo",Bt="https://oss.openmmlab.com/alles-bot/",Et=["openai","minimax","claude","gpt-4","internlm"],B=re()(ie((e,t)=>({token:"",theme:"light",username:"user",mode:q,updateTheme:s=>{e({theme:s})},updateMode:s=>{e({mode:s})}}),{name:"config",version:2,migrate(e,t){const o=JSON.parse(JSON.stringify(e));return t<2&&(o.token={}.VITE_ALLES_APIN_TOKEN,o.theme="light",o.username="user",o.mode=q),o}})),Nt=({children:e,inline:t,className:s,...o})=>{const a=/language-(\w+)/.exec(s||"")||[],r=B();return l.registerLanguage("assembly",Ve),l.registerLanguage("python",Fe),l.registerLanguage("c",Qe),l.registerLanguage("c/c++",he),l.registerLanguage("clike",he),l.registerLanguage("c++",pe),l.registerLanguage("cpp",pe),l.registerLanguage("java",Ke),l.registerLanguage("csharp",fe),l.registerLanguage("c#",fe),l.registerLanguage("vb",_e),l.registerLanguage("visual basic",_e),l.registerLanguage("javascript",xe),l.registerLanguage("typescript",Ge),l.registerLanguage("css",We),l.registerLanguage("less",Ze),l.registerLanguage("js",xe),l.registerLanguage("sql",Xe),l.registerLanguage("php",Je),l.registerLanguage("go",Ye),l.registerLanguage("r",$e),l.registerLanguage("objective-c",Ae),l.registerLanguage("objc",Ae),l.registerLanguage("matlab",et),l.registerLanguage("swift",tt),l.registerLanguage("ruby",st),l.registerLanguage("lua",ot),l.registerLanguage("json",at),l.registerLanguage("yaml",nt),l.registerLanguage("xml",rt),l.registerLanguage("dDockerfile",it),l.registerLanguage("markdown",ve),l.registerLanguage("md",ve),l.registerLanguage("makefile",ct),l.registerLanguage("latex",lt),l.registerLanguage("llvm",dt),l.registerLanguage("shell",be),l.registerLanguage("sh",be),l.registerLanguage("bash",mt),!t&&a?n.jsx(l,{language:(a[1]||"Python").toLowerCase(),style:r.theme==="light"?gt:ut,customStyle:{borderRadius:"10px"},PreTag:"div",...o,children:e}):n.jsx("code",{className:s,...o,children:e})},It=React.memo(Nt),ce=(...e)=>{const t=e.map(s=>typeof s=="function"?s:()=>s);return(...s)=>{let o=0,a;for(a=t.length===0?s:t[o++](...s);o<t.length;)a=t[o++](a);return a}},ne="locale",Tt=()=>{const e=window.localStorage.getItem(ne);return e?e==="en-US"?"en-US":"zh-CN":(localStorage.setItem(ne,"en-US"),"en-US")};let je=Tt();const Ot=e=>(window.localStorage.setItem(ne,e),e),Q=()=>je,Pt=e=>{je=Ot(e)},ye=e=>{const t=document.cookie.split(";");for(let s=0;s<t.length;s++)if(t[s].split("=")[0].trim()===e){const a=new Date;a.setTime(a.getTime()-60),document.cookie=`${t[s]};expires=${a.toUTCString()};path=/;domain=${{}.VITE_COOKIE_DOMAIN}`;break}},Re={tokenKey:"x_token",cookieTokenKey:"uaa-token",getFromCookie(){return ht.get(this.cookieTokenKey)},storage(e){return e==null?(localStorage.removeItem(this.tokenKey),!1):(localStorage.setItem(this.tokenKey,e),!0)},update(e){localStorage.getItem(this.tokenKey)!==e&&this.storage(e)},get(){const e=this.getFromCookie();return this.update(e),e||localStorage.getItem(this.tokenKey)},has(){return!!this.get()},removeAll(){ye(this.cookieTokenKey),ye("ssouid"),localStorage.removeItem(this.tokenKey)}},zt=()=>"/login";function qt(e,t=50){let s=null;return(...o)=>{s?clearTimeout(s):e.apply(this,o),s=setTimeout(()=>{e.apply(this,o)},t)}}const Me=e=>{const t=document.getElementById(e);t&&t.scrollTo({top:999999,behavior:"smooth"})},V=qt(e=>Me(e),50),E=(e,t=null)=>oe?{onTouchEnd:t||e}:{onClick:e||t},Ut=e=>{if(e===null)return 0;const t=window.getSelection();if(t.rangeCount>0){const s=t.getRangeAt(0),o=s.cloneRange();return o.selectNodeContents(e),o.setEnd(s.startContainer,s.startOffset),o.toString().length}return 0};function Dt(e,t){let s=0;const o=document.createRange();o.setStart(e,0);function a(i){for(let c=0;c<i.childNodes.length;c++){const _=i.childNodes[c];if(_.nodeType===Node.TEXT_NODE){if(s+_.length>=t)return o.setStart(_,t-s),o.collapse(!0),!0;s+=_.length}else if(a(_))return!0}}a(e);const r=window.getSelection();r.removeAllRanges(),r.addRange(o)}const Ht=""+new URL("internlm-7cc58d2e.svg",import.meta.url).href,we=""+new URL("openai-6f4a287b.svg",import.meta.url).href,ke=""+new URL("claude-bd5f04f1.svg",import.meta.url).href,Vt="data:image/webp;base64,UklGRrYNAABXRUJQVlA4WAoAAAAQAAAAHwEAHwEAQUxQSDsFAAABoFVtb91YMwRBMIRA8BoCLYOEQcogYTBhkF7uuwwDQzAEQzAE72Pb6JNk/8dGhAS3kRxJUijQM+1w66vdPcB1T97+8/af/53BD9O87PseYzz2fZkvgfR9qNdANkHDvKdSX0mJ2zhI5cyHus/BFsISSz2XEudB3rLTH2qNS7Bizl4qT/IeBH2oG9+HasAMipUzefMiPtKlVM7sXju5cide4OvHyp1EulkqIHlEMqUKyKJ+qunFBPooi2qGikqG7CakiorqxeEZon9f+1hxCZrxFZmFl7lUIIPqtwVq9irm1pq1bwZNmRnnQpmc7sSKzc4yKKK9YpPUj9tTrcLX8hldctY7nP7LXATUeuvJXUxVQK1Q6gBjkdA2KLqtUHDbofi2aWezhDbF8JyrhLbF8nSA6ouAtsZM4kbr7TE+5hDQFjk/3LuAtskHh4BeQA1TyDoZ32b5+cc8fBtm+G0evuaJ32GGt22Ozk3wNs5ClNFtnsuCbvssGdwWCq6p6qyxaqy56qvBaqvJ6qrRaqrZ6qnhaqnp6qjxaqj5ym8D7IfSEKZpWtd1mq5hoEdqKPknH7I9+Gk7cnl+iiQd69X/puj66/rS03m/PuTBCob5OHeNPh/TINVE/uyHXOKsfhFxPSGXvxWR7Jnp0byrYsJWqvaY9vQizbEamjySuldrqcYm717bK4uze02vrM7qVTAZ8krXM7esj4AZn+SFM5dqf1YNc7tl5vXJ3A7Z5VYbklXof/DRlBwkbx+5NibZC2zXOJRaG+TQOa21yNH/bKsUt0WLNhDTrpFMqG0X7u61cdnhrLV5WdGXRmoDE8B7aCGZsCs1MQeQqTYyM3BeKykEndczs661oQkYcktJyG06ZpPcVgrBpx1yeJNaS+SnNjf9SfpF1+x0bS0j9nxup5xc8S/YHdcH/L2d7B53W/6EzTc9g+51wiZofYzGR123DBv8tNmi7riEjOUja7xl2NS5n0p/u5OZDFnvvWhGclN9T7WRq6nOZh8+6X9uwbpmCw5RzKsFGlcbNK1WaFi7RjLlTHAii/g05nZGg1iqMVntOVEA+wFMHP8y2O2MbdhD4niaLRLKTLZwx/365sDBjKYw4f668YDzZv68RI4JnIWMn5fIcQF0t2MKGzqygTRYQUaNrPlAGg3fJpFjBGowe5rIcQI1Wj1N5Fh5pNGTiDmq5+WhJk8+MCc9mHmsxZM75JwQN2A3/WMuSNkBW0j92ojyg/amfm1AAaCN2t8DigCu8rcTfyHAvenmYC8GuFE3hbsg4Bbdg1LuosAbVN+CxVwYeG+ql/AWB94v1adUWAsEb1YMsRaJAEnxmpyFIsBBMYzFIsBRLytfwQhwVXzOia1oBLjrJXIVjgC/FMNUPAKMioddPBWAALNiWCoBBi2DoyLg0DAYKgMW7eJ8hcCjWZyuFJi0irMVgwCT4nHXycpBgFHxablzFQSfFnE/VUkIcFd83uBMRSHAVfFVyROVhQAvih+wf73CEGBQfN775UpDgKT5usmLFQfe5BRzf63ywPul+rrtSxUI3ptmhlcqEbyD7vtGnlckcIvyu2afViZwv3QzPatQ4I66ofK4UoHrne7cHlYsaFenPeufjzc7uaCMdjx/P9xTPj6cEwws41fKuyFP34sGnLf/vP3n70CO7mE7z9Z6xvNcWg+dx7ceFxmWdM7bsf24fPa/FOgALhzTjhl63V0XQCdmZeoDnH/Z7J3rGtPv7YSFLx3ebOS6IsPT8WkMrjsS7g92U7bg+iTDZf2Z0bvuydt/3v7zH3scAFZQOCBUCAAAEDkAnQEqIAEgAT6RRJ1KpaOioahS6OCwEglN3C24HEMf/Sd1BubvX5H/139xerB4x8XcskfX1c+Jebf56f2b1EfdH7gH6edI7zAfzf/dft773Xo9/sXqAfyX/j///sE/QI/cj04v3V+DD9zf2x9qnqAP/11v/V7+Lfh19EvXCxvxzJYwUYa6dCdjp0KfY6DlwoagsX8o5S/jZp889/cIqBA5Kkmbb2R6oUNOkwzh4HBLbMAK60Apk2jVgzkh/EBk7Top9QLajAShK76avl3UPVxQ4in1+nvP4LbUzjV/XcJgR5Jtg/gqc104z8UAQOtQtZZLWkH2ClneCG0tjH9P/CoCc9oZfztGjThBG4wMNf8CrU1EVdYzgW9gZ3JIXZNIOZxmQtoPX79Z0yGvZYKGM0zJx//RrtzdPFFXUuCeBuYFy3OAVn0Fc7OANR0rqM4LB6uANZTXWq5Q8hK31MLT264rJgAashbMTdmAlVjOo0/woads0tb7J0mxeCv/t3DyNjRIc4dOfTklfYDTRY6gs0lORa2CA6Uowz0eZpULLAUUqtAFjBRhrV+3ImZCn2Og5cJV/8xWdD2AZRY6dCn2OeGy7OiGunQnY6dCn2Og5b4AAP7+o1AAAAADYiOcILDuuWsci9B0b41b9I/tsMraTbA+0xbR8mZrT9LQHE750/r95TqkZ79thLBFnE3xUmdvr2hsX90hjLqbWdh5yZPdObAFCP4V8QtRhCrrWGaR0n+Cj5ju5uWctfoumzbwUeVVk1dEOx6A1zer/kOFGnPvbEiUkd3sMOl2WtUBJKZ5/3Efe1fuY/J/bCszDiUwoejV6QnxCxDuQq2zhgbFeaMDfc/UEOFGjxiU0qEYdZvvhzesLV2zBTt4UbojlQ5k/kpmMKfA1qqZgmPwQAqbNM0XWt59nlvGxmjKRdtgv/Z4sqSgTIxxO+sexVkVlX1Oy2bXGBsZ5LW9DpclusT1QF+1i746TOtSZwFAvXcCV6iirnlGDVurs4af1NQ8+4oLmPWAaIGyj6Q6i73QNuQgEaf/pQGpYDWaKMNBMNHUoe6fgwolN2v9hH6GvWVFzKLWYzpePkdQn9vJlbRz7h9uP79Utn2qgbz9d1Bdcbo92lv47o7P3QLkyJ7h+tH++qrlRDFaDszHNudWgDn/Au///3J61cGv/YLZaO/nLUK/37XTRRfKbQIe/9F+Kc8aKLx0PrZq1vgI7q+fZm3brIvEWHsm4n/2ihCEypKNQpguijC5yVqjyUfhgG+xXVUiQgBz4qS5LMTKOIGUGQRRG5TRkJoBxFAuwuAvsXVLForP/ilD7MnlXzKlRINz5dqRFqZuxMM/Ny+rXpCw6VHwiaY8yZVybOujgdk+zGa013rHpWf45Lx3zYMqUsCG9DwmHqks77eG/inFvaDpOfh7/iCw0tJ8EMRzngAfsI8628Ae0gxJVCZjUs9bvMmVd/1fxVSX0xtJFdgGWiyKn69ki+tw1nr1Ai5D6/FVvgGuEqJwM3at8aBU5TtNNGVtlkf+ag0ZL4VLEdDCTFETRtGOykLyqeQzjr+N4rTo7FGXYCzarNKLhSXJi+9VbUf7sGJRDqaeLDpVYTfVPLe+p28ilWh3eROyNdnrnP/apAcHFLTaOBa5sNPdZ8Aka1AO93EDQo8VA2+RCJRl3gPKh9cYgtfnOnowoMYmYHIxEscDQDTXVl9fodyPLBp5DD6Q55wzN+6ibAI+3PaE7b4UQFlDvlP7ebkaAnHgZ26+st6wRS29tTR5Sv2Jsuy4Dnj/Nti3jzxjQrlaCUKCFn2JN+LEtdFSRWJktUQ8GEem1tqbZeBInPlOilkyljyv2B7pRIwFbFGKl7sKw3n9+RpyFvsaLrVCnQ6H4/bq9hbNgf56T9fpUTKus5G6W3Qidcf6vvBAKDeBwFJZRwVxIkyp8N3PaGkw0Om2LsMOLD8EVdABuALoSIJvXybpdmmoX4s0Dd1sj+nVq9SYwdTj1U582tLdlxZT2nyQvgVeN0EJOQmcld+ftPd33+bsn/TlB0IHxuAD61TOTtkjB9cVaasr+LAXw7prGOrdcjgmvoNnGnpHs9GyU7BDztRTrOHhG+91V4dlmPnEr1dIuQ7T4bue4FadywKb9ZekmbkLcN6WfoxEk+R7EFgcf5/N0yw3T5hBTIifiz7tmEX/PZ7WSPAvxzgRrMm0vs7gcpFHnyX8gUrM8MJZQiDLOul7fv8nXnp7AlDdzNCc2CSJCsS/ou8ANoqo/m2uT4P9OaIK8d/mzQw9Vgl4qx84QA5JqAkh8QVN4/skh+h/oSP39BubehO3gzFbDzQIh0aImGaRGMW3rmemMftVo0KhjVmA+NF0jSMmnOhSqj5UadwZKuuoSPYVhTdTgP2A/CYfyqTBRSyauxMNwGDtwo12x0dRcrvkytbH+/HFdWr/pkBFY/rD0kBSEsDFqdm35DRiZFwI5ix9QghSTvm18Z6iljDOmcgumR8z8cRqSgKHQMRLV03A8ExB5ChfRIVXsoqKYsalns2TV2JhuAwduFGlLLgd6x4c/Ks4EZMbO4hAB0idd4FRFb2XDj4dFbZM0GjU9zZoaSSL9iTiQMj+Rviy0n+UH18hEvfswTdERNltgLX+j7e1n1v5nEIKqi1IyIzozh7ZhQn7O6tAay6R4GSTF/XXJuBgbYE+BlQc+iEEKPc3hVwECbt3jRVhfDEpnTz+cHNWAABe4zZxvpObdKAMrBLeB8MAb7S75supeGnYpTCN4Csf2b7FK9sluc44COCegMC3d+3xX/rEzNlqg2uV+qMV8DIN8X8LV+nAZFl41h3qvQ8Uf8p991VLwDAAAAAAAAAAAAA=",Ft=""+new URL("minimax-6a0e4e4d.png",import.meta.url).href,Qt=""+new URL("spark-7fb32fd7.svg",import.meta.url).href,Kt=""+new URL("A-017dd65e.svg",import.meta.url).href,K=[{provider:"internlm",model:"internlm-chat-7b",avatar:Ht,border:"rgba(1,52,220,0.85)",background:"linear-gradient(180deg, rgba(34,76,220,0.85) 0%, #0134DCD8 100%)"},{provider:"openai",model:"gpt-3.5-turbo",avatar:we,border:"#1a8d15",background:"linear-gradient(180deg, rgba(156, 206, 116, 0.15) 0%, #1a8d15 100%)"},{provider:"openai",model:"gpt-4",avatar:we,border:"#4dd547",background:"linear-gradient(180deg, rgba(156, 206, 116, 0.15) 0%, #08be00 100%)"},{provider:"claude",model:"claude-1",avatar:ke,border:"#8550ca",background:"linear-gradient(180deg, rgba(141, 90, 181, 0.15) 0%, rgba(106, 39, 123, 0.7) 53.12%, #663E9A 100%)"},{provider:"claude",model:"claude-1-100k",avatar:ke,border:"#8550ca",background:"linear-gradient(180deg, rgba(141, 90, 181, 0.15) 0%, rgba(106, 39, 123, 0.7) 53.12%, #663E9A 100%)"},{provider:"google",model:"chat-bison-001",avatar:Vt,border:"#ff85c7",background:"linear-gradient(180deg, rgba(181, 90, 90, 0.15) 0%, #fa5ab1 100%)"},{provider:"minimax",model:"abab5-chat",avatar:Ft,border:"#be1313",background:"linear-gradient(180deg, rgba(207, 72, 72, 0.15) 0%, rgba(151, 43, 43, 0.7) 53.12%, #742828 100%)"},{provider:"spark",model:"spark",avatar:Qt,border:"#6fa2db",background:"linear-gradient(180deg, rgba(72, 72, 207, 0.15) 0%, #7498be 100%)"},{provider:"admin",model:"admin",avatar:Kt,border:"#4e6ef2",background:"linear-gradient(rgb(255 255 255 / 80%) 0%, rgb(168 245 179) 100%)"},{provider:"user",model:"user",avatar:"user.png",border:"#71e875",background:"#71e875"}],Gt="_home-operation_16zek_1",Wt="_op-btn_16zek_14",Zt="_op-img_16zek_25",O={"home-operation":"_home-operation_16zek_1",homeOperation:Gt,"op-btn":"_op-btn_16zek_14",opBtn:Wt,"op-img":"_op-img_16zek_25",opImg:Zt},Xt={model:"abab5-chat",prompt:"",messages:[],role_meta:{user_name:"USER",bot_name:"BOT"},stream:!0,type:"json"},Jt={model:"gpt-3.5-turbo",prompt:"",messages:[],role_meta:{user_name:"user",bot_name:"assistant"},type:"json"},Yt={model:"chat-bison-001",prompt:{messages:[]},temperature:.1,candidate_count:1},$t={prompt:"",model:"claude-1",max_tokens:5e3},es={parameter:{chat:{temperature:.5,max_tokens:1024,chat_id:"user1"}},payload:{message:{text:[]}}},ts={model:"internlm-chat-7b",prompt:"",messages:[],role_meta:{user_name:"user",bot_name:"assistant"},stream:!0},D="",L=new Map;L.set("minimax",{url:`${D}/v1/minimax/v1/text/chat-stream`,...Xt});L.set("openai",{url:`${D}/v1/openai/v1/text/chat-stream`,...Jt});L.set("google",{url:`${D}/v1/google/v1/palm/chat`,...Yt});L.set("claude",{url:`${D}/v1/claude/v1/text/chat-stream`,...$t});L.set("spark",{url:`${D}/v1/xunfei/v1/spark/chat`,...es});L.set("internlm",{url:`${D}/v1/internlm/v1/chat/completions`,...ts});const Be=()=>({"Content-Type":"application/json"}),ss=e=>{var t;return((t=L.get(e))==null?void 0:t.url)||L.get(y).url},Le=(e,t,s,o)=>{const a={...L.get(e)||L.get(y)};if(delete a.url,a.model=t,["openai","internlm","gpt-4"].includes(e)&&(a.prompt=s,a.messages=o),e==="minimax"&&(a.prompt=s,a.messages=o.map(r=>({text:r.text,sender_type:r.sender_type==="user"?"USER":"BOT"})),a.messages.push({text:s,sender_type:"USER"})),e==="google"){const r={content:"Hi! How can I help you today?",author:"1"},i=o.map(c=>({content:c.text,author:c.sender_type==="user"?"0":"1"}));i.push({content:s,author:"0"}),i.unshift(r),a.prompt.messages=i}if(e==="baidu"||e==="claude"){const r=o.map(i=>({role:i.sender_type,content:i.text}));r.push({role:"user",content:s}),a.messages=r}if(e==="spark"){const r=o.map(i=>({role:i.sender_type,content:i.text}));r.push({role:"user",content:s}),delete a.model,a.payload.message.text=r}return a},os={development:"",staging:"",production:""},as={mock:"",development:"",staging:"",production:""},Ee="production",ns=os[Ee],rs=as[Ee],is=[],cs=e=>{const t={};return is.find(o=>e.url.endsWith(o))||Re.get(),{...e,headers:{lang:Q(),...e.headers,...t}}},ls=e=>({...e,headers:{...e.headers,"Client-Type":"app",type:0}}),ds=[cs,ls],Ne=()=>{Re.removeAll()},ms=e=>{const t=e.data;return e.__meta.isAllResponseBody?t:t.data},gs=e=>{const t=e.data,o=!e.__meta.isIgnoreError;return t.success===!1&&o&&M.error(t.msg),e},us=e=>{const t=e.data;return t&&t.msgCode==="A0202"&&Ne(),e},hs=e=>{const t=e.data;return t&&t.msgCode==="C1600"&&(window.location.href=zt()),e},ee=(e,t=!1)=>{t||M.error(e)},ps=e=>{if(e.response){const s=e.__meta.isIgnoreGatewayError,o=e.response.status;switch(console.log(e.code,"error....."),o){case 401:case 403:Ne();break;case 500:ee(Q()==="zh-CN"?"服务器没有响应，请稍后再试":"Sever error, please try again later.",s);break;default:e.code==="ERR_NETWORK"?ee(Q()==="zh-CN"?"网络出错了，请稍后再试":"Network error, please try again later.",s):ee(`${o}: ${e.message||"unknown error"}`,s)}}return Promise.reject(e)},Ie=[us,hs,gs,ms],Te=[ps],z=pt.create({method:"get",timeout:6e4,responseType:"json",paramsSerializer:e=>ft.stringify(e,{indices:!1})}),I=new Map,fs=e=>{let t={};return I.has(e.config.url)&&(t=I.get(e.config.url),I.delete(e.config.url)),{...e,__meta:t}},_s=e=>{let t={};return I.has(e.config.url)&&(t=I.get(e.config.url),I.delete(e.config.url)),{...e,__meta:t}};Ie.unshift(fs);Te.unshift(_s);const xs=ce(...ds),As=ce(...Ie),vs=ce(...Te);z.interceptors.request.use(xs,e=>Promise.reject(e));z.interceptors.response.use(As,vs);const bs=(e,{method:t="GET",params:s={},data:o={},...a})=>{const r=`${ns}${e}`;switch(t.toLowerCase()){case"get":return z.get(r,{params:s,...a});case"delete":return z.delete(r,{params:s,data:o,...a});case"post":return z.post(r,o,{params:s,...a});case"put":return z.put(r,o,{params:s,...a});default:return Promise.resolve({then:i=>i({msgCode:"300",msg:"Method Not Allowed",traceId:"-1",total:0,status:405,data:{}})})}},ys=(e,t={},s=rs)=>{const a=`${s}/${e}`.replace(/\/\//g,"/");return t.meta&&(I.set(a,t.meta),delete t.meta),bs(a,t)};async function ws(e,t,s){const o=Be();return ys(e,{method:"POST",headers:{...o},data:t,signal:s,meta:{isAllResponseBody:!0}})}function R(e){return{id:Date.now(),provider:"openai",date:new Date().toLocaleString(),sender_type:"user",text:"",...e}}function P(e){return{id:Date.now()+Math.random(),name:y,bot:"",messages:[],isShow:!0,clearContextIndex:0,...e}}const J=re()(ie((e,t)=>({hasStreaming:!1,sessions:[P({name:U}),P({name:y})],currentSessionIndex:0,globalId:0,controller:{},newSession(s){const o=t().sessions,a=o.findIndex(i=>i.name===s);if(a>0){t().updateSession(a,{isShow:!0});return}const r=P({name:s,isShow:!0});e(()=>({globalId:t().globalId+1})),r.id=t().globalId,o.push(r),e(()=>({sessions:o}))},removeSession(s){const a=t().sessions.findIndex(r=>r.name===s);a&&t().updateSession(a,{isShow:!1})},getSession(s){const o=t().sessions,a=o.findIndex(r=>r.name===s);return a<0?P({name:s}):o[a]},onNewMessage(s,o=0){t().sessions[o].messages.push(s),console.log("[BOT] onNewMessage: ",s,o),e(()=>({sessions:t().sessions}))},deleteMessage(s,o){const a=t().sessions.find(r=>r.name===s);a&&(a.messages.splice(o,1),e(()=>({sessions:t().sessions})))},retry(s,o){const a=o||t().lastBotMessage(s).model||"",r=K.find(c=>c.model===a).provider,i=t().lastUserMessage(s).text;t().lastMessage(s).id===t().lastBotMessage(s).id&&t().getSession(s).clearContextIndex!==t().getSession(s).messages.length&&(t().deleteMessage(s,t().getSession(s).messages.length-1),t().deleteMessage(s,t().getSession(s).messages.length-1)),t().onUserInput(i,r,a,s)},async onUserInput(s,o,a,r){var H;const i=t().sessions.findIndex(d=>d.name===r),c=t().sessions[i];if(!c)return;const _=c.clearContextIndex||0,A=c.messages.slice(_).filter(d=>d.isError!==!0).map(d=>({text:d.text,sender_type:d.sender_type})),u=c.messages.length+1,f=R({text:s,provider:"user",sender_type:"user"}),m=R({provider:o,model:a,text:"...",sender_type:"bot",id:f.id+1,stream:!0});t().onNewMessage(f,i),t().onNewMessage(m,i),V(`chat-wrapper-${c.id}`);const v=new AbortController,C=t().controller;C[r]=v,e(()=>({controller:{...C}}));const N={method:"POST",headers:Be(),body:JSON.stringify({...Le(o,a,s,A)})},w=ss(o);let G=!0;if(Et.includes(o))_t(w,{...N,signal:v.signal,async onopen(d){const g=d.headers.get("content-type");if(g!=null&&g.includes("text/event-stream")||(G=!1),!d.ok)throw new Error(d.status+d.statusText)},onmessage:d=>{if(G&&typeof d.data=="string"&&d.data.charAt(0)==="{"){const g=JSON.parse(d.data);if(g&&g.success==="true"){if(g.stop_reason==="max_token"){m.stream=!1,t().updateMessage(i,u,b=>{b.stream=!1,b.text=m.text.concat(`
 > ${g.stop_reason}`)});return}m.stream=!0,m.text=m.text.startsWith("...")?m.text.slice(3).concat(g.msg):m.text.concat(g.msg),V(`chat-wrapper-${c.id}`),t().updateMessage(i,u,b=>{b.text=m.text,b.stream=m.stream})}if(g&&g.success==="false")throw new Error(g.msg)}},onerror(d){console.log("[BOT] request error: ",d),m.stream=!1,t().updateMessage(i,u,b=>{b.stream=m.stream,b.text=d.message.includes("Please reduce the length of the messages.")?d.message:`${m.text}
 > Oops... Something went wrong (°⌓°)`,b.isError=!0});const g=t().controller;throw delete g[r],e(()=>({controller:{...g}})),d},onclose(){m.stream=!1,t().updateMessage(i,u,g=>{g.stream=m.stream});const d=t().controller;delete d[r],e(()=>({controller:{...d}})),console.log("[BOT] answering closed. ")}});else try{const d=await ws(w,Le(o,a,s,A),v.signal);if(d.msgCode==="10000"&&d.data){if(o==="google"){if(!d.data.candidates&&d.data.filters){m.stream=!1,t().updateMessage(i,u,g=>{g.stream=m.stream,g.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,g.isError=!0});return}m.text=(H=d.data.candidates[0])==null?void 0:H.content}else o==="claude"?m.text=d.data.completion:m.text=d.data;m.stream=!1,t().updateMessage(i,u,g=>{g.text=m.text,g.stream=m.stream}),V(`chat-wrapper-${c.id}`)}else m.stream=!1,t().updateMessage(i,u,g=>{g.stream=m.stream,g.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,g.isError=!0})}catch{t().updateMessage(i,u,g=>{g.stream=!1,g.text=`${m.text}
 > Oops... Something went wrong (°⌓°)`,g.isError=!0})}finally{const d=t().controller;delete d[r],e(()=>({controller:{...d}}))}},updateMessage(s,o,a){const i=t().sessions[s].messages[o];i.date=new Date().toLocaleString(),a(i),e(()=>({sessions:t().sessions}))},lastMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return R({text:""});const a=o==null?void 0:o.messages;return Array.isArray(a)&&a.length>0?a.slice(-1)[0]:R({text:""})},lastUserMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return R({text:""});const a=[...o.messages];return Array.isArray(a)&&a.length>0?a.reverse().find(r=>r.sender_type==="user"):R({text:""})},lastBotMessage(s){const o=t().sessions.find(r=>r.name===s);if(!o)return R({text:""});const a=[...o.messages];return Array.isArray(a)&&a.length>0?a.reverse().find(r=>r.sender_type==="bot"&&r.model!=="admin"):R({text:""})},updateSession(s,o){const a=t().sessions;let r=a[s];r={...r,...o},a[s]=r,e(()=>({sessions:a}))},closeController(s){const o=t().controller,a=o==null?void 0:o[s];if(a){a.abort&&a.abort(),delete o[s],e(()=>({controller:{...o}}));const r=t().sessions.findIndex(c=>c.name===s),i=t().sessions[r];t().updateMessage(r,i.messages.length-1,c=>{c.stream=!1,c.text=c.text.concat(`
 > Request canceled。`)}),V(`chat-wrapper-${i.id}`)}},clearAllData(){localStorage.removeItem("chat"),e(()=>({sessions:[P({name:y})]})),window.location.reload()}}),{name:"chat",version:2,migrate(e,t){const s=e,o=JSON.parse(JSON.stringify(s));if(t<2){o.globalId=0,o.sessions=[];const a=s.sessions;for(const r of a){const i=P({name:U});i.id=r.id,i.name=r.name,i.clearContextIndex=r.clearContextIndex,i.messages=[...r.messages],o.sessions.push(i)}}return o}})),le=re()(ie((e,t)=>({chosenBotNames:[y],currentBot:y,updateCurrentBot:s=>{e({currentBot:s})},addBot:s=>{const{chosenBotNames:o}=t();o.includes(s)||e({chosenBotNames:[...o,s]})},removeBot:s=>{const{chosenBotNames:o}=t();e({chosenBotNames:o.filter(a=>a!==s)})},getCurrentBot:()=>t().currentBot||y,clearBots:()=>{localStorage.removeItem("bot"),e({chosenBotNames:[y]})}}),{name:"bot",version:2,migrate(e,t){const o=JSON.parse(e);return t<2&&(o.chosenBotNames=[y],o.currentBot=y),o}})),ks=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsxs("g",{clipPath:"url(#clip0_50_304)",children:[n.jsx("mask",{id:"mask0_50_304",maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"20",height:"20",children:n.jsx("path",{d:"M20 0H0V20H20V0Z",fill:"white"})}),n.jsxs("g",{mask:"url(#mask0_50_304)",children:[n.jsx("path",{d:"M18.659 10.0709L13.2991 2.95807L5.8894 8.54167L11.4582 15.4167L12.8564 14.4435L18.659 10.0709Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M11.4582 15.4167L9.85879 16.6978L5.45733 16.6975L4.37379 15.2596L1.69385 11.7032L6.0415 8.427",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M5.50244 16.6967H18.569",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round"})]})]}),n.jsx("defs",{children:n.jsx("clipPath",{id:"clip0_50_304",children:n.jsx("rect",{width:"20",height:"20",fill:"white"})})})]})},Ls=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.33301 2.46417H11.6663V5.79752H17.9163V9.13086H2.08301V5.79752H8.33301V2.46417Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M3.33301 16.6667H16.6663V9.16669H3.33301V16.6667Z",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinejoin:"round"}),n.jsx("path",{d:"M6.66699 16.624V14.1309",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M10 16.624V14.124",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M13.333 16.624V14.1309",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M5 16.6667H15",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},Cs=()=>{const e=B();return n.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[n.jsx("path",{d:"M15.3033 15.3033C13.9461 16.6605 12.0711 17.5 10 17.5C5.85787 17.5 2.5 14.1421 2.5 10C2.5 5.85787 5.85787 2.5 10 2.5C12.0711 2.5 13.9461 3.33947 15.3033 4.69671C15.9941 5.38754 17.5 7.08333 17.5 7.08333",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"}),n.jsx("path",{d:"M17.5 3.33331V7.08331H13.75",stroke:e.theme==="light"?"black":"white",strokeWidth:"1.66667",strokeLinecap:"round",strokeLinejoin:"round"})]})},Ss=e=>{var A;const{modelName:t}=e,s=J(),{sessions:o}=s,a=o.find(u=>u.name===t),r=le(),i=()=>{const u=s.sessions.findIndex(m=>m.name===t),f=s.sessions[u];s.lastMessage(f.name).sender_type!==Z&&(f.clearContextIndex=f.messages.length||0,s.updateSession(u,f),s.onNewMessage(R({model:"admin",text:"",sender_type:Z,id:Date.now(),stream:!1,isError:!0}),u),V(`chat-wrapper-${f.id}`))},c=()=>{const u=o.findIndex(f=>f.name===t);s.updateSession(u,{messages:[],clearContextIndex:0})},_=()=>{s.closeController(t)};return React.useEffect(()=>()=>{_()},[]),n.jsxs("div",{className:O.homeOperation,children:[s.lastMessage(t).stream&&n.jsx(W,{title:"Stop generating",className:O.opBtn,children:n.jsx("div",{...E(_),children:n.jsx("img",{src:`${Bt}stop.png`,className:O.opImg,alt:"stop"},"stop_generate")})}),!!((A=a.messages)!=null&&A.length)&&!s.lastMessage(t).stream&&n.jsxs(n.Fragment,{children:[n.jsx(W,{title:"Clear context",className:O.opBtn,children:n.jsx("div",{...E(i),children:n.jsx(ks,{})})}),n.jsx(W,{title:"Clear message history",className:O.opBtn,children:n.jsx("div",{...E(c),children:n.jsx(Ls,{})})}),n.jsx(W,{title:"Regenerate",className:O.opBtn,children:n.jsx("div",{...E(()=>s.retry(a.name,a.name===U&&r.currentBot)),children:n.jsx(Cs,{})})})]})]})},js="_hidden-scrollbar_61gam_1",Rs="_styled-scrollbar_61gam_11",Ms="_sessions_61gam_30",Bs="_preview-sessions_61gam_39",Es="_session-wrapper_61gam_51",Ns="_chat_61gam_56",Is="_empty-chat_61gam_74",Ts="_empty-chat-text_61gam_81",Os="_message_61gam_96",Ps="_message-wrapper_61gam_102",zs="_chat-user-title_61gam_162",qs="_chat-bot-title_61gam_170",Us="_message-item_61gam_178",Ds="_stream-wrapper_61gam_183",Hs="_glow_61gam_1",Vs="_chat-user_61gam_162",Fs="_chat-bot_61gam_170",Qs="_chat-operations_61gam_196",Ks="_chat-date_61gam_207",Gs="_chat-checkbox_61gam_214",Ws="_model-avatar_61gam_257",Zs="_model-avatar-img_61gam_270",Xs="_model-name_61gam_273",Js="_copy-code-btn_61gam_279",Ys="_clear-line_61gam_292",$s="_markdown-block_61gam_314",eo="_mario_61gam_1",to="_running-mario_61gam_1",x={"hidden-scrollbar":"_hidden-scrollbar_61gam_1",hiddenScrollbar:js,"styled-scrollbar":"_styled-scrollbar_61gam_11",styledScrollbar:Rs,sessions:Ms,"preview-sessions":"_preview-sessions_61gam_39",previewSessions:Bs,"session-wrapper":"_session-wrapper_61gam_51",sessionWrapper:Es,chat:Ns,"empty-chat":"_empty-chat_61gam_74",emptyChat:Is,"empty-chat-text":"_empty-chat-text_61gam_81",emptyChatText:Ts,message:Os,"message-wrapper":"_message-wrapper_61gam_102",messageWrapper:Ps,"chat-user-title":"_chat-user-title_61gam_162",chatUserTitle:zs,"chat-bot-title":"_chat-bot-title_61gam_170",chatBotTitle:qs,"message-item":"_message-item_61gam_178",messageItem:Us,"stream-wrapper":"_stream-wrapper_61gam_183",streamWrapper:Ds,glow:Hs,"chat-user":"_chat-user_61gam_162",chatUser:Vs,"chat-bot":"_chat-bot_61gam_170",chatBot:Fs,"chat-operations":"_chat-operations_61gam_196",chatOperations:Qs,"chat-date":"_chat-date_61gam_207",chatDate:Ks,"chat-checkbox":"_chat-checkbox_61gam_214",chatCheckbox:Gs,"model-avatar":"_model-avatar_61gam_257",modelAvatar:Ws,"model-avatar-img":"_model-avatar-img_61gam_270",modelAvatarImg:Zs,"model-name":"_model-name_61gam_273",modelName:Xs,"copy-code-btn":"_copy-code-btn_61gam_279",copyCodeBtn:Js,"clear-line":"_clear-line_61gam_292",clearLine:Ys,"markdown-block":"_markdown-block_61gam_314",markdownBlock:$s,mario:eo,"running-mario":"_running-mario_61gam_1",runningMario:to};async function so(e){try{await navigator.clipboard.writeText(e),M.success("copied!")}catch{const s=document.createElement("textarea");s.value=e,document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy"),M.success("copied!")}catch{M.error("copy failed")}document.body.removeChild(s)}}function oo(e){const t=React.useRef(null),[s,o]=React.useState(!1),a=()=>{if(t.current){const r=t.current.innerText;so(r)}};return n.jsx("pre",{ref:t,children:n.jsxs("div",{onMouseOver:()=>o(!0),onFocus:()=>o(!0),onMouseLeave:()=>o(!1),children:[s&&n.jsx("span",{className:x.copyCodeBtn,...E(a)}),e.children]})})}const ao=()=>n.jsx("div",{id:x.mario});function no(e){const[t,s]=React.useState(!1),{message:o}=e,a=o.sender_type==="user"||o.provider==="user",r=ae(x.messageWrapper,a?x.chatUser:x.chatBot),i=B(),c=K.find(_=>_.model===(o.model||"user"));return c?n.jsx("div",{className:x.message,style:{justifyContent:a?"flex-end":"flex-start"},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:o.sender_type===Z?n.jsx("div",{className:x.clearLine,children:"Context cleared"}):n.jsxs(n.Fragment,{children:[!oe&&!a&&n.jsx("div",{style:{background:c.background},className:x.modelAvatar,children:n.jsx("img",{src:c.avatar,className:x.modelAvatarImg,alt:c.model})}),n.jsxs("div",{title:o.model||i.username,className:r,style:{borderRadius:a?"10px 1px 10px 10px":"1px 10px 10px 10px"},children:[o.stream&&n.jsx(ao,{}),t&&n.jsx("div",{className:x.chatOperations,children:n.jsx("div",{children:`${c.provider} - ${c.model}`})}),n.jsx(xt,{className:x.markdownBlock,remarkPlugins:[At,vt,bt],rehypePlugins:[yt],components:{code:It,pre:oo},children:o.text}),t&&n.jsx("div",{className:x.chatDate,style:{right:a?"0":"auto",left:a?"auto":"0"},children:o.date})]}),!oe&&a&&n.jsx("div",{style:{color:c.background,marginRight:2},className:x.modelAvatar,children:"ME"})]})}):null}function ro(e){const{session:t}=e;return React.useEffect(()=>{Me(`chat-wrapper-${t.id}`)},[t.messages.length]),n.jsxs("div",{className:x.sessionWrapper,children:[n.jsxs("div",{className:x.chat,id:`chat-wrapper-${t.id}`,children:[Array.isArray(t.messages)&&t.messages.length===0&&n.jsx("div",{className:x.emptyChat,children:n.jsxs("div",{className:x.emptyChatText,children:[n.jsx("span",{children:"Shortcuts"}),n.jsx("br",{}),n.jsx("br",{}),n.jsx("code",{children:"#"})," - Change chat mode"]})}),Array.isArray(t.messages)&&t.messages.map((s,o)=>n.jsx("div",{className:x.messageItem,children:n.jsx(no,{message:s,sessionInfo:{id:t.id,name:t.name,bot:t.bot}},s.id)},s.id))]}),n.jsx(Ss,{modelName:t.name})]})}const io=()=>{const e=J(),t=B(),{sessions:s}=e;return n.jsx("div",{className:x.sessions,children:Array.isArray(s)&&s.map(o=>t.mode===q&&o.name!==U||t.mode===X&&o.name===U||!o.isShow?null:n.jsx(ro,{session:o},o.id))})},co="_home-models_1vuuq_1",lo="_model-avatar_1vuuq_10",mo="_model-avatar-img_1vuuq_24",go="_model-chosen_1vuuq_29",uo="_model-name_1vuuq_35",ho="_model-avatar-chosen_1vuuq_43",F={"home-models":"_home-models_1vuuq_1",homeModels:co,"model-avatar":"_model-avatar_1vuuq_10",modelAvatar:lo,"model-avatar-img":"_model-avatar-img_1vuuq_24",modelAvatarImg:mo,"model-chosen":"_model-chosen_1vuuq_29",modelChosen:go,"model-name":"_model-name_1vuuq_35",modelName:uo,"model-avatar-chosen":"_model-avatar-chosen_1vuuq_43",modelAvatarChosen:ho},Oe=()=>{document.querySelectorAll(".scale-avatar").forEach(e=>{e.style.setProperty("--scale","1")})};function po(e){const t=React.useRef(null),s=B(),o=J(),a=le(),[r,i]=React.useState(!1),c=s.mode===X&&a.chosenBotNames.includes(e.model.model)||s.mode===q&&a.currentBot===e.model.model;function _(u){if(s.mode===X)if(a.chosenBotNames.includes(u)){if(a.chosenBotNames.length===1){M.warning("At least one model should be selected");return}a.removeBot(u),o.removeSession(u)}else a.chosenBotNames.length===Mt?M.warning("No more models can be selected"):(a.addBot(u),o.newSession(u));else a.updateCurrentBot(u)}const A=u=>{let f=u.target;u.target!==t.current&&(f=u.target.parentNode);const m=f.getBoundingClientRect(),v=Math.abs(u.clientX-m.left)/m.width,C=f.previousElementSibling||null,N=f.nextElementSibling||null,w=.4;Oe(),C&&C.style.setProperty("--scale",`${1+w*Math.abs(v-1)}`),f.style.setProperty("--scale",`${1+w}`),N&&N.style.setProperty("--scale",`${1+w*v}`),u.stopPropagation()};return n.jsxs("div",{ref:t,className:`${F.modelAvatar} ${c&&F.modelAvatarChosen} scale-avatar`,onMouseMove:A,onMouseOver:()=>i(!0),onMouseLeave:()=>i(!1),...E(()=>_(e.model.model)),onFocus:()=>i(!0),children:[n.jsx("img",{src:e.model.avatar,className:F.modelAvatarImg,alt:e.model.provider}),(r||c)&&n.jsxs("div",{className:F.modelName,children:["@",e.model.model||e.model.provider]})]})}const fo=()=>n.jsx("div",{className:F.homeModels,onMouseLeave:Oe,children:K.filter(e=>!Rt.includes(e.provider)).map(e=>n.jsx(po,{model:e},e.model))}),te=[{name:"Serial Mode",title:"Toggle between serial and parallel mode",description:"Serial mode will send your message to one bot each time."},{name:"Parallel Mode",title:"Toggle between serial and parallel mode",description:"Parallel mode will send your message to all bots at once."}],_o=""+new URL("send-5bb2204f.png",import.meta.url).href,xo="_home-prompt-wrapper_1o1fz_1",Ao="_prompt_1o1fz_29",vo="_prompt-trash_1o1fz_36",bo="_prompt-operation_1o1fz_40",yo="_chosen-prompt_1o1fz_45",wo="_model-item_1o1fz_49",ko="_model-avatar_1o1fz_54",Lo="_home-input-wrapper_1o1fz_60",Co="_prompt-editor_1o1fz_78",So="_model-name-list_1o1fz_85",jo="_model-name_1o1fz_85",Ro="_empty-editor_1o1fz_97",Mo="_backup-textarea_1o1fz_144",Bo="_submit-btn_1o1fz_150",Eo="_prompt-clip_1o1fz_154",S={"home-prompt-wrapper":"_home-prompt-wrapper_1o1fz_1",homePromptWrapper:xo,prompt:Ao,"prompt-trash":"_prompt-trash_1o1fz_36",promptTrash:vo,"prompt-operation":"_prompt-operation_1o1fz_40",promptOperation:bo,"chosen-prompt":"_chosen-prompt_1o1fz_45",chosenPrompt:yo,"model-item":"_model-item_1o1fz_49",modelItem:wo,"model-avatar":"_model-avatar_1o1fz_54",modelAvatar:ko,"home-input-wrapper":"_home-input-wrapper_1o1fz_60",homeInputWrapper:Lo,"prompt-editor":"_prompt-editor_1o1fz_78",promptEditor:Co,"model-name-list":"_model-name-list_1o1fz_85",modelNameList:So,"model-name":"_model-name_1o1fz_85",modelName:jo,"empty-editor":"_empty-editor_1o1fz_97",emptyEditor:Ro,"backup-textarea":"_backup-textarea_1o1fz_144",backupTextarea:Mo,"submit-btn":"_submit-btn_1o1fz_150",submitBtn:Bo,"prompt-clip":"_prompt-clip_1o1fz_154",promptClip:Eo},se={default:"Press # to toggle chat mode, and ENTER to send",google:"Google does not support Chinese"},No=()=>{const e=J(),t=le(),s=B(),o=React.useRef(null),a=React.useRef(null),[r,i]=React.useState(te),[c,_]=React.useState(!1),[A,u]=React.useState(""),[f,m]=React.useState(null),[v,C]=React.useState(0),[N,w]=React.useState(""),[G,H]=React.useState(se.default),[d,g]=React.useState(""),[b,Pe]=React.useState(0),[Y,de]=React.useState(!1),[ze,me]=React.useState(!0),$=h=>(h=h.replace(/<span class="modelName">.*?<\/span>/g,""),a.current.innerHTML=h,a.current.innerText||""),T=(h,p=!0)=>{if(h===d)return;const k={allowedTags:["b","i","a","p","text","br","div","span","img"],allowedAttributes:{a:["href"],span:["class","id"],img:["src"],div:["class","id"]}};if(p){const He=Ut(o.current);Pe(He)}g(wt(h,k))},ge=h=>{h.name==="Serial Mode"?(s.updateMode(q),M.success("Change to serial mode!"),T("")):h.name==="Parallel Mode"?(s.updateMode(X),M.success("Change to parallel mode!"),T("")):(m(h),T("")),u(""),_(!1),w("")},ue=()=>{if(A.trim())if(u(""),T(""),s.mode===q){const h=K.find(p=>p.model===t.currentBot).provider;e.onUserInput(A,h,t.currentBot,U)}else t.chosenBotNames.forEach(h=>{const p=K.find(k=>k.model===h).provider;e.onUserInput(A,p,h,h)})},qe=h=>{const p=h.key;if(!Y){if(p==="Enter"&&!h.shiftKey){if(h.preventDefault(),A.trim()){if(c){ge(r[v]);return}ue()}me(!0)}if(p==="#"&&!c&&_(!0),c){const k=r.length-1;p==="ArrowUp"?(C(v===0?k:v-1),h.preventDefault()):p==="ArrowDown"?(C(v===k?0:v+1),h.preventDefault()):p==="Backspace"&&A.slice(-1)==="#"&&(_(!1),w(""))}c&&p==="Escape"&&_(!1)}},Ue=h=>{if(Y)return;const p=h.target;console.log($(p.innerHTML),p.innerHTML),u($(p.innerHTML));const k=p.innerHTML;T(k)},De=h=>{if(me(!h.target.textContent.length),Y)return;const p=h.target;u($(p.innerHTML));const k=p.innerHTML;T(k)};return React.useEffect(()=>{const h=te.filter(p=>p.name.toLowerCase().includes(N.toLowerCase()));C(0),h.length===0?(_(!1),i(te)):i(h)},[N]),React.useEffect(()=>{c&&w(A.split("#").slice(-1)[0])},[A]),React.useEffect(()=>{H(f?f.description:se[t.currentBot]||se.default)},[f,t.currentBot]),React.useLayoutEffect(()=>{o.current&&Dt(o.current,b)},[d]),n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:S.homeInputWrapper,children:[c&&n.jsx("div",{className:S.homePromptWrapper,children:r.map((h,p)=>n.jsx("div",{className:ae(S.prompt,{[S.chosenPrompt]:p===v}),...E(()=>ge(h)),children:n.jsx("div",{className:S.modelItem,children:h.name})},h.name))}),f&&n.jsxs("div",{className:S.modelName,children:["#",f.name]}),n.jsx("div",{contentEditable:!0,spellCheck:!0,ref:o,id:"prompt-textarea",className:ae(S.promptEditor,{[S.emptyEditor]:ze}),"data-text":G,onKeyDown:qe,onKeyUp:Ue,onCompositionStart:()=>de(!0),onInput:De,onCompositionEnd:()=>de(!1),dangerouslySetInnerHTML:{__html:d}}),n.jsx("img",{className:S.promptClip,src:_o,alt:"send-message",...E(ue)})]}),n.jsx("div",{ref:a,style:{opacity:0,display:"hidden",position:"fixed",fontSize:0}})]})},Io="_loading-icon_1yjma_1",To="_aoe_1yjma_1",Oo="_home-loading_1yjma_6",Ce={"loading-icon":"_loading-icon_1yjma_1",loadingIcon:Io,aoe:To,"home-loading":"_home-loading_1yjma_6",homeLoading:Oo},Po=()=>n.jsx("div",{className:Ce.homeLoading,children:n.jsx("div",{className:Ce.loadingIcon})}),zo="_home_1tmut_1",qo="_home-chats_1tmut_5",Uo="_homeModal_1tmut_10",Se={home:zo,"home-chats":"_home-chats_1tmut_5",homeChats:qo,homeModal:Uo},Do=()=>{const[e,t]=React.useState(!1);return React.useEffect(()=>{setTimeout(()=>{t(!0)},1500)},[]),e},Ho=()=>Do()?n.jsxs("div",{className:Se.home,children:[n.jsx("div",{className:Se.homeChats,children:n.jsx(io,{})}),n.jsx(No,{}),n.jsx(fo,{})]}):n.jsx(Po,{}),Vo=()=>n.jsx(kt,{children:n.jsx(Lt,{children:n.jsx(Ct,{path:"/",element:n.jsx(Ho,{})})})}),Fo={welcome:"欢迎，感恩",hello:"嗨",hi:"你好",loading:"Loading"},Qo={...Fo},Ko={welcome:"Welcome, grateful",hello:"Hi",hi:"Hello",loading:"Loading"},Go={...Ko},Wo={"zh-CN":Qo,"en-US":Go};function Zo(e){}const Xo={locale:Q(),setLocale:Zo},Jo=React.createContext(Xo),Yo=({children:e})=>{const[t,s]=React.useState(Q()),o=React.useCallback(r=>{s(r),Pt(r)},[]),a=React.useMemo(()=>({locale:t,setLocale:o}),[t,o]);return n.jsx(St,{locale:t,messages:Wo[t],children:n.jsx(Jo.Provider,{value:a,children:e})})},$o=""+new URL("AOE-b98456c3.svg",import.meta.url).href,ea="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEKSURBVHgBtVWLDYIwEH1RB2CEbuAKbqAbgBOoE+AGjIAboRPABrIBcnLE2vRqD9OXvJCUd196xxo6FCO3Ix9IhIEZjRUSww2QYWqDEfQd0weyPfBTBAmoBW0giA+Gbcg2DwkzS1hbZ1frnNjwe8OaSpOYYYMdpnY9Lccu6d2ZtTV0Vb8Nh0jmUML8yNxXSaYJUCuczyyhQLMgQCs5KzyiYSGB79uWJ59kCXYWsWx8jqQKbtDjrhHTldNeUwMlCkWAk+TE1yKDaQ66kZeRPWT0nAj9gCpE7qH5A1dOQHs2SFPiM721dR6c6AL/r+t9SJixQMqihTyxBtPSU+0kF/bERiH5JG+gwxHKCl5qY6X0Tnl2NgAAAABJRU5ErkJggg==",ta="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFkSURBVHgB7VTLcYNADNViF+CL+dxIB6QDXEHSQZxK7HSQDhJ34A4gHdAB3PgMBxfAJ08Tx7NZWDA4R7+ZndFqJT2BPkR3jECMGaRp6huG8dK2rY+rixNCfnUcJ6ErIAYCu0KID4j+xViIvWVZbzQBvQRFUXjIMsBZ3RKcsVQVnLkaHPIJ50Az0CFApn+Cn3WhbdsJzYAhX/I8f6afQqqkEc2EodyfNHYu/ROBp7HT6TvgGmoJ8O97A7Ge54GuAGZmpyUYAs+Emp0KvO+RzHaIING7Ew9eUJZlp05xHK+yLHvH+05tiKWSZahmoJJUVXVEsIgD8XyciX2ptfUETdMcYLylcXhyvSBfHhaLxVE27KwKZBeQtH8mIsFAPsiKTpF5U+IrTjQR7APfjarvEPAahvFmCgnbsk/fCu9tU9M0I9TjkYa76hch27JPL/mYN7dlXde8o+TC8leGGKrP9Xr9RXfcgm+bjqOGex62UQAAAABJRU5ErkJggg==",sa="_header_1iqh2_1",oa="_header-title_1iqh2_11",aa="_header-operation_1iqh2_22",na="_light-theme_1iqh2_25",ra="_dark-theme_1iqh2_36",ia="_animate-light_1iqh2_47",ca="_animate-dark_1iqh2_51",j={header:sa,"header-title":"_header-title_1iqh2_11",headerTitle:oa,"header-operation":"_header-operation_1iqh2_22",headerOperation:aa,"light-theme":"_light-theme_1iqh2_25",lightTheme:na,"dark-theme":"_dark-theme_1iqh2_36",darkTheme:ra,"animate-light":"_animate-light_1iqh2_47",animateLight:ia,"animate-dark":"_animate-dark_1iqh2_51",animateDark:ca},la=()=>{const e=React.useRef(null),t=React.useRef(null),[s,o]=React.useState(!1),a=B(),r=()=>{window.location.href="/"},i=(c="")=>{setTimeout(()=>{a.updateTheme(c||a.theme==="light"?"dark":"light")},200)};return React.useEffect(()=>{},[a.theme]),React.useEffect(()=>{document.body.setAttribute("data-theme",a.theme),e.current&&t.current&&(a.theme==="light"?(e.current.classList.remove(j.animateLight),t.current.classList.remove(j.animateDark)):a.theme==="dark"&&(e.current.classList.add(j.animateLight),t.current.classList.add(j.animateDark)))},[a.theme,s]),n.jsxs("div",{className:j.header,children:[n.jsx("div",{className:j.headerTitle,onClick:r,children:n.jsx("img",{src:$o,alt:"AOE_LOGO"})}),n.jsxs("div",{className:j.headerOperation,onClick:()=>i(),children:[n.jsx("span",{ref:e,className:j.lightTheme,children:n.jsx("img",{src:ea,alt:"sun",onLoad:()=>o(!s)})}),n.jsx("span",{ref:t,className:j.darkTheme,children:n.jsx("img",{src:ta,alt:"moon",onLoad:()=>o(!s)})})]})]})};const da=()=>n.jsxs(Yo,{children:[n.jsx(la,{}),n.jsx(Vo,{})]});jt.createRoot(document.getElementById("root")).render(n.jsx(da,{}));
